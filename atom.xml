<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>间客六十</title>
  <icon>https://www.gravatar.com/avatar/cda2d170e4d695691a573126f5381220</icon>
  <subtitle>技术引领生活</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://liusblog.top/"/>
  <updated>2020-02-29T05:10:39.097Z</updated>
  <id>https://liusblog.top/</id>
  
  <author>
    <name>spygg</name>
    <email>liushidc@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>镜像网站和自定义域名</title>
    <link href="https://liusblog.top/2020/02/23/%E9%95%9C%E5%83%8F%E7%BD%91%E7%AB%99%E5%92%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/"/>
    <id>https://liusblog.top/2020/02/23/镜像网站和自定义域名/</id>
    <published>2020-02-23T14:42:28.000Z</published>
    <updated>2020-02-29T05:10:39.097Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于众所周知的原因,github 经常抽风,偶尔了解到 netlify 可以镜像本网站,于是特记录之….</p></blockquote><h2 id="多个-git-账号同步"><a href="#多个-git-账号同步" class="headerlink" title="多个 git 账号同步"></a>多个 git 账号同步</h2><p>在 .ssh 文件夹下生成一个 config 文件配置好各个私钥.如下示例.</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Host</span> <span class="string">gitcafe.com</span></span><br><span class="line"><span class="attr">IdentityFile</span> <span class="string">~/.ssh/gitcafe</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Host</span> <span class="string">github.com</span></span><br><span class="line"><span class="attr">IdentityFile</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line"></span><br><span class="line"><span class="attr">Host</span> <span class="string">git.oschina.net</span></span><br><span class="line"><span class="attr">IdentityFile</span> <span class="string">~/.ssh/chitanda_osc</span></span><br></pre></td></tr></table></figure><h2 id="netfily-镜像"><a href="#netfily-镜像" class="headerlink" title="netfily 镜像"></a>netfily 镜像</h2><h3 id="注册账号"><a href="#注册账号" class="headerlink" title="注册账号"></a>注册账号</h3><p><a href="https://app.netlify.com/" target="_blank" rel="noopener">Netlify 官网网站</a>然后使用 github 账号登录</p><h3 id="创建网站"><a href="#创建网站" class="headerlink" title="创建网站"></a>创建网站</h3><ul><li>点击 New site from Git 按钮</li><li>选择你需要部署的仓库(就是那个 username.github.io )</li><li>完成之后点击途中 deploy site 按钮</li></ul><h3 id="设置域名，绑定域名"><a href="#设置域名，绑定域名" class="headerlink" title="设置域名，绑定域名"></a>设置域名，绑定域名</h3><ul><li><p>可以看到 netlify 为我们随机生成了一个 netlify 下的域名，这里我们可以更改其前缀，并绑定到我们自己的域名下：</p></li><li><p>更改 netlify 域名前缀：点击上图中 Site settings 按钮，然后在下方点击 Change site name 按钮，然后在弹出框中输入自己需要更改的前缀名，点击保存即可，如下图所示：</p></li></ul><p><img src="/photos/镜像网站和自定义域名/更改名称.png" alt="图片"></p><ul><li>如果有自定义域名可以使用 https 加密之类的,本屌就到这里就行…</li></ul><h3 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h3><p><a href="https://www.cnblogs.com/codernie/p/9062104.html" target="_blank" rel="noopener">手把手教你使用 netlify 实现前端的 自动部署 + HTTPS</a></p><p>最牛逼的是在 github 上部署完毕后,netlify 会<strong>自动更新同步</strong>….</p><hr><h2 id="码云镜像"><a href="#码云镜像" class="headerlink" title="码云镜像"></a>码云镜像</h2><ul><li>方法一:(必须码云和 github 同一个邮箱)<br>修改_config.yml 配置文件中添加码云</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">repo</span>:</span><br><span class="line">    <span class="attribute">github</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:spygg/spygg.github.io.git</span><br><span class="line">    ##<span class="attribute">gitee</span>: git<span class="variable">@gitee</span>.<span class="attribute">com</span>:spygg/spygg.git</span><br></pre></td></tr></table></figure><ul><li>方法二:<br>在码云中新建一个和你用户名一样的库,<strong>新建的时候选择导入库</strong> 导入的地址就是你 github 这个地址<br>如<a href="https://github.com/spygg/spygg.github.io" target="_blank" rel="noopener">https://github.com/spygg/spygg.github.io</a></li></ul><h2 id="自定义域名解析"><a href="#自定义域名解析" class="headerlink" title="自定义域名解析"></a>自定义域名解析</h2><ul><li>到阿里云购买一个域名</li><li>在阿里控制台中添加域名解析</li><li>在 github 工程设置中设置解析地址</li><li>设置 CNAME<ol><li>将 CNAME 放到 source 根目录下</li><li>内容只有一个(知乎上搜的是错误示范)<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">liusblog.<span class="built_in">top</span></span><br></pre></td></tr></table></figure></li></ol></li></ul><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>要重新设置 gitalk 的回调主页为最新域名</p><h3 id="支持多个-gitalk-方法"><a href="#支持多个-gitalk-方法" class="headerlink" title="支持多个 gitalk 方法"></a>支持多个 gitalk 方法</h3><ol><li>在 github 上新申请一个 <strong>OAuth Apps</strong></li><li>修改主题目录下的_config.yml 文件,添加一条 gitee 的记录</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Gitalk评论</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">clientID:</span> <span class="string">6c31603d4df9afc8351b</span></span><br><span class="line">   <span class="attr">clientSecret:</span> <span class="string">c9e81f3ac1492550170fccb28c0f8bb16e3b7ed1</span></span><br><span class="line">   <span class="attr">repo:</span> <span class="string">blogcomment</span></span><br><span class="line">   <span class="attr">owner:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">admin:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">id:</span> <span class="string">window.location.pathname</span></span><br><span class="line">   <span class="comment"># perPage:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">gitalkgitee:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">clientID:</span> <span class="string">2e6379556d0bea565323</span></span><br><span class="line">   <span class="attr">clientSecret:</span> <span class="string">2feb2ad5f1301351c79e1d0e2b1a177bb0661ed7</span></span><br><span class="line">   <span class="attr">repo:</span> <span class="string">blogcomment</span></span><br><span class="line">   <span class="attr">owner:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">admin:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">id:</span> <span class="string">window.location.pathname</span></span><br></pre></td></tr></table></figure><ol start="3"><li>修改 gitalk.ejs 文件,主要是判断域名来加载不同的 oauth</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/gitalk/1.6.0/gitalk.min.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/gitalk/1.6.0/gitalk.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitalk-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> gitalk;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span>(<span class="built_in">window</span>.location.host === <span class="string">'spygg.gitee.io'</span>)&#123;</span></span><br><span class="line"><span class="actionscript">        gitalk = <span class="keyword">new</span> Gitalk(&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// Gitalk配置</span></span></span><br><span class="line"><span class="actionscript">            clientID: <span class="string">"&lt;%= theme.gitalkgitee.clientID%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            clientSecret: <span class="string">"&lt;%= theme.gitalkgitee.clientSecret%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            repo: <span class="string">"&lt;%= theme.gitalkgitee.repo%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            owner: <span class="string">"&lt;%= theme.gitalkgitee.owner%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            admin: [<span class="string">"&lt;%= theme.gitalkgitee.admin%&gt;"</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">            id: md5(<span class="tag">&lt;<span class="name">%=</span> <span class="attr">theme.gitalkgitee.id</span>%&gt;</span>),</span></span></span><br><span class="line"><span class="actionscript">            distractionFreeMode: <span class="literal">true</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    <span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">        gitalk = <span class="keyword">new</span> Gitalk(&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">// Gitalk配置</span></span></span><br><span class="line"><span class="actionscript">            clientID: <span class="string">"&lt;%= theme.gitalk.clientID%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            clientSecret: <span class="string">"&lt;%= theme.gitalk.clientSecret%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            repo: <span class="string">"&lt;%= theme.gitalk.repo%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            owner: <span class="string">"&lt;%= theme.gitalk.owner%&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            admin: [<span class="string">"&lt;%= theme.gitalk.admin%&gt;"</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">            id: md5(<span class="tag">&lt;<span class="name">%=</span> <span class="attr">theme.gitalk.id</span>%&gt;</span>),</span></span></span><br><span class="line"><span class="actionscript">            distractionFreeMode: <span class="literal">true</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    gitalk.render(<span class="string">'gitalk-container'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="CDN-加速"><a href="#CDN-加速" class="headerlink" title="CDN 加速"></a>CDN 加速</h2><ul><li>在主题的_config.yml 中添加 bootstrap 和 fontAwesome 的 CDN</li><li>替换主页的背景图片和头像为 gittee 的绝对路径链接</li><li>替换 default,tagcanvas,gitment 等 css 到 gitee 的绝对路径链接</li></ul><ul><li>优化图片参考<a href="https://www.cnblogs.com/toumingbai/p/8298289.html" target="_blank" rel="noopener">使用 FFMPEG 压缩 png 图片 与 tinypng 压缩结果对比</a></li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">好吧 看来需要优化一下调色板</span><br><span class="line"></span><br><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="keyword">in</span><span class="selector-class">.png</span> -vf palettegen=max_colors=<span class="number">256</span>:stats_mode=single -y out_3.png</span><br><span class="line"></span><br><span class="line">这里的输出结果是一个调色板 并不是完整图像 由于这是单张静图所以mode使用的是single</span><br><span class="line"></span><br><span class="line">这个参数有几种具体区别可以看文档 http:<span class="comment">//ffmpeg.org/ffmpeg-all.html#palettegen-1</span></span><br><span class="line"></span><br><span class="line">再用优化过的调色板去转换 得到结果 <span class="number">116</span> KB</span><br><span class="line"></span><br><span class="line">ffmpeg -<span class="selector-tag">i</span> <span class="keyword">in</span><span class="selector-class">.png</span> -<span class="selector-tag">i</span> out_3<span class="selector-class">.png</span> -lavfi <span class="string">"[0][1:v] paletteuse"</span> -pix_fmt pal8 -y out_4.png</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;由于众所周知的原因,github 经常抽风,偶尔了解到 netlify 可以镜像本网站,于是特记录之….&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;多个-git-账号同步&quot;&gt;&lt;a href=&quot;#多个-git-账号同步&quot; class=&quot;he
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="netlify" scheme="https://liusblog.top/tags/netlify/"/>
    
      <category term="镜像" scheme="https://liusblog.top/tags/%E9%95%9C%E5%83%8F/"/>
    
      <category term="加速" scheme="https://liusblog.top/tags/%E5%8A%A0%E9%80%9F/"/>
    
  </entry>
  
  <entry>
    <title>Qt中的矩阵计算库eigen</title>
    <link href="https://liusblog.top/2020/02/23/Qt%E4%B8%AD%E7%9A%84%E7%9F%A9%E9%98%B5%E8%AE%A1%E7%AE%97%E5%BA%93eigen/"/>
    <id>https://liusblog.top/2020/02/23/Qt中的矩阵计算库eigen/</id>
    <published>2020-02-23T09:39:16.000Z</published>
    <updated>2020-02-23T10:15:28.898Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在实际工程中由于需要使用矩阵计算,网上搜罗了下,发现 eigen 库比较靠谱,这里简要介绍下食用方法,以及如何避免运行断言</p></blockquote><h2 id="下载库"><a href="#下载库" class="headerlink" title="下载库"></a>下载库</h2><p><a href="http://eigen.tuxfamily.org/" target="_blank" rel="noopener">eigen 官网</a></p><h2 id="引入到-Qt-工程中"><a href="#引入到-Qt-工程中" class="headerlink" title="引入到 Qt 工程中"></a>引入到 Qt 工程中</h2><ul><li>将 源码中的 的 Eigen 目录拷贝到 Qt 工程的目录</li><li>目录中新建 eigen.pri 文件内容如下</li></ul><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INCLUDEPATH += <span class="symbol">$</span><span class="symbol">$</span>PWD</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ul><li>新建 C++类</li><li>在头文件中添加</li></ul><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Geometry&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li>cpp 文件示例</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">using namespace Eigen;</span><br><span class="line"></span><br><span class="line"><span class="comment">//.......</span></span><br><span class="line"><span class="comment">//一维矩阵</span></span><br><span class="line">VectorXf <span class="constructor">V(20)</span>;</span><br><span class="line"><span class="comment">//赋值,一维元素引用和赋值</span></span><br><span class="line">for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)&#123;</span><br><span class="line">    <span class="constructor">V(<span class="params">i</span>)</span> = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MatrixXf <span class="constructor">M(10, 20)</span>;</span><br><span class="line"><span class="comment">//矩阵赋值和引用</span></span><br><span class="line">for(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">    for(<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; <span class="number">20</span>; j++)&#123;</span><br><span class="line">        <span class="constructor">M(<span class="params">i</span>, <span class="params">j</span>)</span> = (i<span class="operator"> * </span><span class="number">20</span> + j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//矩阵相乘</span></span><br><span class="line">VectorXf <span class="constructor">V2(10)</span>;</span><br><span class="line">V2 = M<span class="operator"> * </span>V;</span><br></pre></td></tr></table></figure><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>如果不慎失误矩阵的维数不一致可能导致运行时 assert 错误,经过查看源代码发现可以定义 EIGEN_NO_DEBUG 即可,更简单的方法为在 pri 文件中添加语句,修改后的 pri 文件如下</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#CONFIG(debug, debug|release):&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#&#125;</span></span><br><span class="line"><span class="meta">#else&#123;</span></span><br><span class="line"><span class="meta">##release版本</span></span><br><span class="line"><span class="meta">#    DEFINES += EIGEN_NO_DEBUG</span></span><br><span class="line"><span class="meta">#&#125;</span></span><br><span class="line"></span><br><span class="line">DEFINES += EIGEN_NO_DEBUG</span><br><span class="line"></span><br><span class="line">INCLUDEPATH += $$PWD</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在实际工程中由于需要使用矩阵计算,网上搜罗了下,发现 eigen 库比较靠谱,这里简要介绍下食用方法,以及如何避免运行断言&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;下载库&quot;&gt;&lt;a href=&quot;#下载库&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="Qt" scheme="https://liusblog.top/tags/Qt/"/>
    
      <category term="矩阵" scheme="https://liusblog.top/tags/%E7%9F%A9%E9%98%B5/"/>
    
  </entry>
  
  <entry>
    <title>导出Qt模块DLL给VC调用</title>
    <link href="https://liusblog.top/2019/10/22/%E5%AF%BC%E5%87%BAQt%E6%A8%A1%E5%9D%97DLL%E7%BB%99VC%E8%B0%83%E7%94%A8/"/>
    <id>https://liusblog.top/2019/10/22/导出Qt模块DLL给VC调用/</id>
    <published>2019-10-22T10:39:38.000Z</published>
    <updated>2020-02-23T05:43:27.959Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于Qt的强大特性,在VC开发时一直想能否导出Qt的各个模块为VC所用,本文介绍一种思路,抛砖引玉下,经测试<em>满足</em> <strong>VC 6.0</strong>及以上版本</p></blockquote><h2 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h2><p>大家都知道MFC框架没有很好的数据库框架来用,而Qt的数据库模块简直不要太好用,于是就想能否来个<strong>乾坤大挪移</strong>呢?经过一阵乱撸,终于搞定!!!</p><h2 id="借鉴思路"><a href="#借鉴思路" class="headerlink" title="借鉴思路"></a>借鉴思路</h2><p><a href="https://blog.csdn.net/ly305750665" target="_blank" rel="noopener">雨田哥的博客</a>之 <a href="https://blog.csdn.net/ly305750665/article/details/65948096" target="_blank" rel="noopener">封装QtCore</a>,于是想除了QtCore能否将Qt的数据库模块也导出来呢?答案是肯定的</p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><p>分为两个部分:</p><ol><li>DLL模块</li><li>测试调用程序</li></ol><h3 id="DLL编写"><a href="#DLL编写" class="headerlink" title="DLL编写"></a>DLL编写</h3><p>先说下版本,为了方便的在Windows下调用,肯定使用<strong>MSVC版本</strong>的Qt,我电脑上装了Qt 4.8.0 VS 2010版本</p><ul><li>新建Qt C++ library工程</li></ul><p>偷巧的方法为先使用Qt Creator 创建一个DLL工程,然后再用VS插件打开进行编译,经测试需要在工程文件夹下建立include文件夹放入下列文件<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">qsqldatabase</span><span class="selector-class">.h</span>  <span class="selector-tag">qsqlerror</span><span class="selector-class">.h</span>  <span class="selector-tag">qsqlrecord</span><span class="selector-class">.h</span></span><br><span class="line"><span class="selector-tag">qsqldriver</span><span class="selector-class">.h</span>    <span class="selector-tag">qsqlquery</span><span class="selector-class">.h</span>  <span class="selector-tag">qvariant</span><span class="selector-class">.h</span></span><br></pre></td></tr></table></figure></p><p>请注意,以上文件为真实的文件,一般在Qt安装目录下的corelib目录下(可以通过QtCreator跳转过去,一直找到真实的文件为止)</p><ul><li>代码如下</li></ul><h4 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//qsqllib.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> QSQLLIB_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QSQLLIB_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qsqldatabase.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qsqlquery.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qsqldriver.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qsqlerror.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qsqlrecord.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"include/qvariant.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> defined(QSQLLIB_LIBRARY)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QSQLLIBSHARED_EXPORT  __declspec(dllexport)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> QSQLLIBSHARED_EXPORT  __declspec(dllimport)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QSQLLIBSHARED_EXPORT</span> <span class="title">CSql</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    CSql();</span><br><span class="line">    ~CSql();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">exec</span><span class="params">( QSqlQuery *query, QString queryString)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">closeDataBase</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">connectDataBase</span><span class="params">(QString dbName,</span></span></span><br><span class="line"><span class="function"><span class="params">        QString type = <span class="string">"QSQLITE"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        QString host = <span class="string">"127.0.0.1"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">int</span> port = <span class="number">-1</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        QString userName = <span class="string">""</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        QString passWd = <span class="string">""</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">QString <span class="title">lastError</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">QStringList <span class="title">drivers</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">QSqlDatabase *<span class="title">dataBase</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">QSqlRecord <span class="title">tableInfo</span><span class="params">(QString table)</span></span>;</span><br><span class="line">    <span class="function">QStringList <span class="title">tables</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">    QSqlDatabase m_db;</span><br><span class="line">    QStringList m_tables;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !defined(QSQLLIB_LIBRARY)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> _DEBUG</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/qSqlLibd.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/QtSqld4.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/QtCored4.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/qSqlLib.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/QtSql4.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(lib, <span class="meta-string">"lib/QtCore4.lib"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// QSQLLIB_H</span></span></span><br></pre></td></tr></table></figure><h4 id="Cpp文件"><a href="#Cpp文件" class="headerlink" title="Cpp文件"></a>Cpp文件</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码 qsqllib.cpp</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"qsqllib.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDir&gt;</span></span></span><br><span class="line"></span><br><span class="line">CSql::CSql()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">CSql::~CSql()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_db.isOpen())&#123;</span><br><span class="line">        closeDataBase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CSql::closeDataBase</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        QString connectionName = m_db.connectionName();</span><br><span class="line">        m_db.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        m_db = QSqlDatabase();</span><br><span class="line">        QSqlDatabase::removeDatabase(connectionName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CSql::connectDataBase</span><span class="params">(QString dbName, QString type, </span></span></span><br><span class="line"><span class="function"><span class="params">QString host, <span class="keyword">int</span> port, QString userName, QString passWd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    QCoreApplication::addLibraryPath(QDir::toNativeSeparators(QCoreApplication::applicationDirPath()));</span><br><span class="line">    QCoreApplication::addLibraryPath(QDir::toNativeSeparators(<span class="string">"./"</span>));</span><br><span class="line">    <span class="comment">//关闭已有连接,将m_db重置</span></span><br><span class="line">    closeDataBase();</span><br><span class="line"></span><br><span class="line">    m_db = QSqlDatabase::addDatabase(type);</span><br><span class="line"></span><br><span class="line">    m_db.setHostName(host);</span><br><span class="line">    m_db.setPort(port);</span><br><span class="line">    m_db.setUserName(userName);</span><br><span class="line">    m_db.setPassword(passWd);</span><br><span class="line">    m_db.setDatabaseName(dbName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_db.<span class="built_in">open</span>()) &#123;</span><br><span class="line">        <span class="comment">//关闭数据库,必须这样..</span></span><br><span class="line">        closeDataBase();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(type.compare(<span class="string">"QOCI"</span>) == <span class="number">0</span> || type.compare(<span class="string">"QODBC"</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">        QStringList tl;</span><br><span class="line">        QSqlQuery query;</span><br><span class="line">        <span class="function"><span class="keyword">const</span> QLatin1String <span class="title">tableQuery</span><span class="params">(<span class="string">"select table_name from user_tables"</span>)</span></span>;</span><br><span class="line">        exec(&amp;query, tableQuery);</span><br><span class="line">        <span class="keyword">while</span> (query.next()) &#123;</span><br><span class="line">            tl.append(query.value(<span class="number">0</span>).toString());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        m_tables = tl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        m_tables = m_db.tables();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">QSqlDatabase *<span class="title">CSql::dataBase</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &amp;m_db;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">QSqlRecord <span class="title">CSql::tableInfo</span><span class="params">(QString table)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//开启事务</span></span><br><span class="line">    m_db.transaction();</span><br><span class="line">    QSqlRecord record =  m_db.record(table);</span><br><span class="line">    m_db.commit();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> record;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">QStringList <span class="title">CSql::tables</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_tables;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">QStringList <span class="title">drivers</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> QSqlDatabase::drivers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">CSql::exec</span><span class="params">( QSqlQuery *query, QString queryString)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> bok = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//开启事务</span></span><br><span class="line">    m_db.transaction();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!queryString.isEmpty())&#123;</span><br><span class="line">        bok = query-&gt;exec(queryString);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        bok = query-&gt;exec();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    m_db.commit();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bok;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">QString <span class="title">CSql::lastError</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m_db.lastError().<span class="built_in">text</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试调用程序"><a href="#测试调用程序" class="headerlink" title="测试调用程序"></a>测试调用程序</h3><ol><li>新建一个MFC工程</li><li>加入上一步中的导出头文件(见底部链接下载即可)</li><li>对用到的头文件拷贝到当前文件夹下来(对于 VC6.0来说,必须将文件编码转为assic版本,不然会报错)</li><li>找到对应版本的.lib文件拷贝到当前目录下lib文件夹下</li><li>编写代码,如下<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">include</span> <span class="string">"include/qsqllib.h"</span></span><br><span class="line"></span><br><span class="line">void foo<span class="literal">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">bool</span> bok = <span class="literal">false</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="built_in">char</span> dbName<span class="literal">[<span class="number">255</span>]</span> = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">char</span> <span class="keyword">type</span><span class="literal">[<span class="number">20</span>]</span> = &#123;<span class="number">0</span>&#125;;<span class="comment">//"QSQLITE"</span></span><br><span class="line">    <span class="built_in">char</span> host<span class="literal">[<span class="number">20</span>]</span> = &#123;<span class="number">0</span>&#125;;   <span class="comment">//"127.0.0.1",</span></span><br><span class="line">    <span class="built_in">char</span> szPort<span class="literal">[<span class="number">20</span>]</span> = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">char</span> userName<span class="literal">[<span class="number">50</span>]</span> = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">char</span> passWd<span class="literal">[<span class="number">50</span>]</span> = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="comment">//......</span></span><br><span class="line">    CSql sql;</span><br><span class="line">    bok = sql.connect<span class="constructor">DataBase(<span class="params">dbName</span>, <span class="params">type</span>, <span class="params">host</span>, <span class="params">atoi</span>(<span class="params">szPort</span>)</span>, userName, passWd);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!bok)&#123;</span><br><span class="line">        <span class="constructor">AfxMessageBox(<span class="params">sql</span>.<span class="params">lastError</span>()</span>.<span class="keyword">to</span><span class="constructor">Local8Bit()</span>.const<span class="constructor">Data()</span>);</span><br><span class="line">        return FALSE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    QSqlQuery query;</span><br><span class="line">    bok = sql.exec(&amp;query, <span class="string">"select * from table"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(bok)&#123;</span><br><span class="line">        <span class="keyword">while</span>(query.next<span class="literal">()</span>)&#123;</span><br><span class="line">            <span class="constructor">TRACE(<span class="string">"%d, %s\n"</span>, <span class="params">query</span>.<span class="params">value</span>(0)</span>.<span class="keyword">to</span><span class="constructor">Int()</span>,query.value(<span class="number">1</span>).<span class="keyword">to</span><span class="constructor">String()</span>.<span class="keyword">to</span><span class="constructor">Local8Bit()</span>.const<span class="constructor">Data()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="经验"><a href="#经验" class="headerlink" title="经验"></a>经验</h2><ol><li>VC 6.0版本要求文件编码为<strong>ASSIC</strong>,Qt默认版本应该是 utf-8,所以可以通过notepad++转化,本人已经将所有的格式转化完毕,见附件<a href="/attachment/导出Qt模块DLL给VC调用/include.zip">头文件</a></li><li>对于<strong>编译错误</strong>先注释起来(为毛这样能行?因为对于DLL来说只要有个声明就行.h文件中声明的东西在对应的DLL中都已经实现了)</li><li>对于数据库提示<em>Driver not loader</em>错误,需要将sqldriver路径加入到库路径,见代码中的QCoreApplication::addLibraryPath();</li><li>数据库关闭错误说明见<a href="/2019/06/20/Qt数据库removeDatabase注意事项/">Qt数据库removeDatabase注意事项</a></li><li><p>在C语言的DLL中(本文未给出)其他版本的都OK,但是oracle老是在退出的时候崩溃,一阵乱撸之下发现有两种方法可以搞定(貌似是资源释放的问题),都不是很理想,于是就有了C++的class版本</p><ul><li><p>方法1:(勉强可以接受)</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用指针</span></span><br><span class="line">QSqlQuery *query = <span class="keyword">new</span> <span class="constructor">QSqlQuery()</span>;</span><br><span class="line">bok = exec(query, <span class="string">"select * from table"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(bok)&#123;</span><br><span class="line">    <span class="keyword">while</span>(query-&gt;next<span class="literal">()</span>)&#123;</span><br><span class="line">        <span class="constructor">TRACE(<span class="string">"%d, %s\n"</span>, <span class="params">query</span>-&gt;<span class="params">value</span>(0)</span>.<span class="keyword">to</span><span class="constructor">Int()</span>,query-&gt;value(<span class="number">1</span>).<span class="keyword">to</span><span class="constructor">String()</span>.<span class="keyword">to</span><span class="constructor">Local8Bit()</span>.const<span class="constructor">Data()</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这里要delete</span></span><br><span class="line">delete query;</span><br></pre></td></tr></table></figure></li><li><p>方法2:(有点2)</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用局部区域变量来自动释放</span></span><br><span class="line">&#123;</span><br><span class="line">    QSqlQuery query;</span><br><span class="line">    bok = exec(&amp;query, <span class="string">"select * from table"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(bok)&#123;</span><br><span class="line">        <span class="keyword">while</span>(query.next<span class="literal">()</span>)&#123;</span><br><span class="line">            <span class="constructor">TRACE(<span class="string">"%d, %s\n"</span>, <span class="params">query</span>.<span class="params">value</span>(0)</span>.<span class="keyword">to</span><span class="constructor">Int()</span>, query.value(<span class="number">1</span>).<span class="keyword">to</span><span class="constructor">String()</span>.<span class="keyword">to</span><span class="constructor">Local8Bit()</span>.const<span class="constructor">Data()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>也曾尝试将Gui相关的导出,比如QPixmap类,但是没有成功</p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><ul><li><p>GUI类也可以成功,比如QImage,可以直接使用, QPixmap类,需要在头文件中注释掉错误行即可</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//Q_DECLARE_SHARED(<span class="name">QPixmap</span>)</span><br></pre></td></tr></table></figure></li><li><p>需要注意的是在使用GUI相关的类时会提示在使用前必须<strong>初始化QApplication</strong><br>解决方案:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在实例化QPixmap之前调用实例化QApplication</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MFC_FOO</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> argc = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> *argv[] = &#123;</span><br><span class="line">        <span class="string">"foo"</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QPixmap pix;</span><br><span class="line"></span><br><span class="line">    pix.loadFromData(....);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//MFC 代码  ......</span></span><br><span class="line">    <span class="comment">//          .....</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//不需要调用a的事件循环,嗯,就是这么浪..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h2><ul><li>附件中的头文件链接在来一遍<a href="/attachment/导出Qt模块DLL给VC调用/include.zip">头文件</a></li><li>对于最难缠的oracle数据来说,OCI版本的DLL见<a href="/attachment/导出Qt模块DLL给VC调用/oracle的oci驱动DLL.zip">oracle的oci驱动DLL</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;由于Qt的强大特性,在VC开发时一直想能否导出Qt的各个模块为VC所用,本文介绍一种思路,抛砖引玉下,经测试&lt;em&gt;满足&lt;/em&gt; &lt;strong&gt;VC 6.0&lt;/strong&gt;及以上版本&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;起源&quot;
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="Qt" scheme="https://liusblog.top/tags/Qt/"/>
    
      <category term="C" scheme="https://liusblog.top/tags/C/"/>
    
      <category term="VC 6.0" scheme="https://liusblog.top/tags/VC-6-0/"/>
    
      <category term="MFC" scheme="https://liusblog.top/tags/MFC/"/>
    
  </entry>
  
  <entry>
    <title>Qt帮助系统的制作</title>
    <link href="https://liusblog.top/2019/07/03/Qt%E5%B8%AE%E5%8A%A9%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%88%B6%E4%BD%9C/"/>
    <id>https://liusblog.top/2019/07/03/Qt帮助系统的制作/</id>
    <published>2019-07-03T14:58:25.000Z</published>
    <updated>2020-02-23T05:43:27.956Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Qt的帮助系统很好看,观察自带的帮助都是HTML格式,当然最好的方法是使用QtWeb模块,但好多Qt版本不支持啊.想到QTextBrowser可以显示图片啥的,一阵乱撸终于搞定,分享之….</p></blockquote><h2 id="系列目录"><a href="#系列目录" class="headerlink" title="系列目录"></a>系列目录</h2><p>本文是系列教程&lt;跟随Designer源码学Qt&gt;中的一篇详见<a href="/2019/06/24/跟随Designer源码学Qt/">跟随Designer源码学Qt</a></p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p><img src="/../photos/跟随Designer源码学Qt/Qt帮助.png" alt="帮助"></p><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><p>我是拿Designer的帮助系统来操刀,首先想的是用QTextBrowser直接读取HTML文件后显示,但是悲剧的是页面中的图片全部不能正常显示,突然想到在Designer中明明可以插入图片显示啊.在Designer查看HTML源码视图中发现只能插入<strong>Qt文件系统</strong>的图片恍然大悟,于是突发奇想:如果能将帮助页面中的图片都来源于Qt的文件系统就行了,结果还真是可以!!</p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol><li>将要制作的所有文件添加到Qt资源系统中(如果有文件夹,可以添加多次,<strong>务必</strong>全部添加上)</li><li>找个好的文本编辑器(我用的Sublime)可以进行全局替换</li><li><p>将html中的href和图片全部换为你的资源路径,(搜索href=”),<em>这一步最重要</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 替换后的示例 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">":/help/doc/qtdesigner-manual.html"</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>修改css文件中的url路径为资源url路径(搜索 url)</p></li><li>编写代码读取内容后然后调用QTextBrowser的setHtml函数加载主页,然后里面的子链接要<strong>重载anchorClicked</strong>函数进行加载,如下面所示.</li></ol><h2 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h2><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"helpsystemdialog.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_helpsystemdialog.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDesktopWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line">HelpSystemDialog::HelpSystemDialog(QWidget *parent) :</span><br><span class="line">    QDialog(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::HelpSystemDialog)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    QRect <span class="built_in">rect</span> = qApp-&gt;desktop()-&gt;availableGeometry();</span><br><span class="line">    resize(<span class="built_in">rect</span>.<span class="built_in">width</span>(), <span class="built_in">rect</span>.<span class="built_in">height</span>());</span><br><span class="line">    setWindowFlags((windowFlags() &amp; ~Qt::WindowContextHelpButtonHint) | Qt::WindowMinMaxButtonsHint);</span><br><span class="line"></span><br><span class="line">    loadFile(<span class="string">":/help/doc/qtdesigner-manual.html"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HelpSystemDialog::~HelpSystemDialog()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HelpSystemDialog::loadFile</span><span class="params">(QString fileName)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(fileName)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(file.<span class="built_in">open</span>(QIODevice::ReadOnly))&#123;</span><br><span class="line">        ui-&gt;textBrowser-&gt;setHtml(file.readAll());</span><br><span class="line">        file.<span class="built_in">close</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">HelpSystemDialog::on_textBrowser_anchorClicked</span><span class="params">(<span class="keyword">const</span> QUrl &amp;arg1)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!arg1.path().isEmpty())&#123;</span><br><span class="line">        loadFile(arg1.path());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>好吧,没啥多说的,效果还是很不错的,主要的是可以将帮助直接封装到可执行文件中,很是炫酷哦</p><h2 id="PPS"><a href="#PPS" class="headerlink" title="PPS"></a>PPS</h2><p>我只是借用Qt的帮助,如果你自己要重写帮助可以先用HTML写好(可以在浏览器中预览还是很方便的),然后采用前文说的步骤一样是可以的,欢迎留言哦…</p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>为了兼容原html,改用替换路径的形式提供,思路与前文同,同时增加了<a href="/attachment/Qt帮助系统的制作/helpDemo.zip">demo程序以供下载</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Qt的帮助系统很好看,观察自带的帮助都是HTML格式,当然最好的方法是使用QtWeb模块,但好多Qt版本不支持啊.想到QTextBrowser可以显示图片啥的,一阵乱撸终于搞定,分享之….&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;系列目
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="帮助系统" scheme="https://liusblog.top/tags/%E5%B8%AE%E5%8A%A9%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="QTextBrowser" scheme="https://liusblog.top/tags/QTextBrowser/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu环境搭建Qt进行Android开发</title>
    <link href="https://liusblog.top/2019/06/28/Ubuntu%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BAQt%E8%BF%9B%E8%A1%8CAndroid%E5%BC%80%E5%8F%91/"/>
    <id>https://liusblog.top/2019/06/28/Ubuntu环境搭建Qt进行Android开发/</id>
    <published>2019-06-27T16:07:15.000Z</published>
    <updated>2020-02-23T05:43:27.957Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>鉴于Qt的全平台性,用来开发android对于只会用C++的人来说太合适了,但是在第一关往往都会遇到不少坑,本文将一一细数之…</p></blockquote><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>不说搭建的环境就是耍流氓,往往遇到问题的都是运行环境的问题,好吧,先说下我的环境配置</p><ul><li>Ubuntu : 版本18.04</li><li>Qt: 版本5.12.03</li></ul><h2 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h2><ol><li>去官网上下载Qt,嗯还是国内的源比较快<a href="&quot;https://mirrors.tuna.tsinghua.edu.cn/qt/&quot;">清华大学</a></li><li>安装时选择到/opt目录</li><li><p>安装jdk,必须用这个<strong>openjdk</strong>,去oracle网上下载会要登录啥的,而且会出问题</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk<span class="number">-8</span>-jdk</span><br></pre></td></tr></table></figure></li><li><p>下载android-studio(用snap方式)<br>直接去软件中心网速会非常的慢,难以忍受,<strong>解决方案</strong>如下:</p></li></ol><ul><li>前往 <a href="https://uappexplorer.com/snaps" target="_blank" rel="noopener">网址uappexplorer</a> 搜索需要的 snap 包</li><li>下载对应架构的 snap 包</li><li>下载完成后，在同一目录执行以下命令即可<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap <span class="keyword">install</span> xxx.snap <span class="comment">--dangerous</span></span><br></pre></td></tr></table></figure></li></ul><ol start="5"><li>打开android studio后更新sdk,如果发现更新不了,去<a href="https://laod.cn" target="_blank" rel="noopener">老D</a> 或则 <a href="https://github.com/googlehosts/hosts" target="_blank" rel="noopener">网址</a>下载更新hosts</li><li><p>安装sdk,这里选择一个8.0版本的吧(也可以在Creator中安装)</p></li><li><p>打开Qt Creator<br>这里特别说明:</p></li></ol><ul><li>用OpenJDK 上面已经说过</li><li>用NDK版本为18就行,别用最新版的<a href="https://developer.android.com/ndk/downloads/" target="_blank" rel="noopener">下载网址</a><br>弄完后如下图所示<br><img src="/../photos/Ubuntu环境搭建Qt进行Android开发/QtCreator环境.png" alt="环境截图"></li></ul><ol start="8"><li><p>打开AVD创建镜像,可能要先执行命令</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod <span class="number">777</span> /dev/kvm</span><br></pre></td></tr></table></figure></li><li><p>在android studio的avd 设置中选择皮肤</p></li></ol><h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a>参考网址</h2><ul><li><a href="https://doc-snapshots.qt.io/qt5-5.12/android-getting-started.html" target="_blank" rel="noopener">Qt文档官网</a></li><li><a href="https://wiki.qt.io/Qt_for_Android_known_issues" target="_blank" rel="noopener">Qt_for_Android_known_issues</a></li></ul><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><ul><li>科学上网很重要</li><li>别用最新版本,很多坑的</li><li>官方文档很重要</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;鉴于Qt的全平台性,用来开发android对于只会用C++的人来说太合适了,但是在第一关往往都会遇到不少坑,本文将一一细数之…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="软件使用" scheme="https://liusblog.top/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
    
      <category term="Android" scheme="https://liusblog.top/tags/Android/"/>
    
      <category term="Ubuntu" scheme="https://liusblog.top/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Qt单实例运行</title>
    <link href="https://liusblog.top/2019/06/25/Qt%E5%8D%95%E5%AE%9E%E4%BE%8B%E8%BF%90%E8%A1%8C/"/>
    <id>https://liusblog.top/2019/06/25/Qt单实例运行/</id>
    <published>2019-06-25T15:05:23.000Z</published>
    <updated>2020-02-23T05:43:27.955Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在用Qt写程序时候可能遇到避免程序重复启动的问题,我们知道用MFC时有个FindWindow函数可以进行窗口查找于是想Qt能否实现呢,经过一番摸索和折腾终于搞定(测试环境为Win7和Ubuntu)</p></blockquote><h2 id="系列目录"><a href="#系列目录" class="headerlink" title="系列目录"></a>系列目录</h2><p>本文是系列教程&lt;跟随Designer源码学Qt&gt;中的一篇详见<a href="/2019/06/24/跟随Designer源码学Qt/">跟随Designer源码学Qt</a></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><img src="/../photos/Qt单实例运行/Qt单实例运行.png" alt="一去二三里"><br>具体见链接<a href="https://waleon.blog.csdn.net/" target="_blank" rel="noopener">Qt学习一二三</a></p><p>根据大神的说明大致有三种:</p><ul><li>QSharedMemory</li><li>QLocalServer</li><li>QtSingleApplication<br>本文着重介绍QLocalServer,在大神的代码基础上修改了下使程序启动时判断如果已经启动则进行窗口显示</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>废话不多说直接上硬货</p><p>头文件<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SINGLEAPPLICATION_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SINGLEAPPLICATION_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QLocalServer</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QWidget</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleApplication</span> :</span> <span class="keyword">public</span> QApplication</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    SingleApplication(<span class="keyword">int</span> &amp;argc, <span class="keyword">char</span> **argv);</span><br><span class="line">    ~SingleApplication();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isRunning</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存主窗口指针</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSingleMainWindow</span><span class="params">(QWidget* w)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">newLocalConnection</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">bool</span> m_bRunning;</span><br><span class="line">    QLocalServer *m_pServer;</span><br><span class="line">    QWidget *m_widget;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SINGLEAPPLICATION_H</span></span></span><br></pre></td></tr></table></figure></p><p>cpp文件<br><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">include</span> <span class="string">"singleapplication.h"</span></span><br><span class="line">#<span class="keyword">include</span> &lt;QLocalSocket&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;QLocalServer&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;QFile&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;QTextStream&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;QWidget&gt;</span><br><span class="line">#<span class="keyword">include</span> &lt;QDebug&gt;</span><br><span class="line"></span><br><span class="line">static const <span class="built_in">char</span> *ApplicationName = <span class="string">"myApp"</span>;</span><br><span class="line"></span><br><span class="line">SingleApplication::<span class="constructor">SingleApplication(<span class="params">int</span> &amp;<span class="params">argc</span>, <span class="params">char</span> <span class="operator">**</span><span class="params">argv</span>)</span>:</span><br><span class="line">    <span class="constructor">QApplication(<span class="params">argc</span>, <span class="params">argv</span>)</span>,</span><br><span class="line">    m<span class="constructor">_mousePoint(0, 0)</span>,</span><br><span class="line">    m<span class="constructor">_mousePressed(<span class="params">false</span>)</span>,</span><br><span class="line">    m<span class="constructor">_bRunning(<span class="params">false</span>)</span>,</span><br><span class="line">    m<span class="constructor">_pServer(Q_NULLPTR)</span>,</span><br><span class="line">    m<span class="constructor">_widget(Q_NULLPTR)</span></span><br><span class="line">&#123;</span><br><span class="line">    set<span class="constructor">OrganizationName(QStringLiteral(<span class="string">"MyProject"</span>)</span>);</span><br><span class="line">    set<span class="constructor">ApplicationName(QLatin1String(ApplicationName)</span>);</span><br><span class="line"></span><br><span class="line">#<span class="keyword">if</span> !defined(Q_OS_OSX)</span><br><span class="line">    set<span class="constructor">WindowIcon(QIcon(QStringLiteral(<span class="string">":/image/calcapp.png"</span>)</span>));</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">    QString strServerName = <span class="constructor">QString(<span class="string">"%1%2"</span>)</span></span><br><span class="line">            .arg(QCoreApplication::organization<span class="constructor">Name()</span>)</span><br><span class="line">            .arg(QCoreApplication::application<span class="constructor">Name()</span>);</span><br><span class="line"></span><br><span class="line">    QLocalSocket socket;</span><br><span class="line">    socket.connect<span class="constructor">ToServer(<span class="params">strServerName</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (socket.wait<span class="constructor">ForConnected(500)</span>)&#123;</span><br><span class="line">        QTextStream stream(&amp;socket);</span><br><span class="line">        QStringList args = QCoreApplication::arguments<span class="literal">()</span>;</span><br><span class="line">        QString strArg = (args.count<span class="literal">()</span> &gt; <span class="number">1</span>) ? args.last<span class="literal">()</span> : <span class="string">""</span>;</span><br><span class="line">        stream &lt;&lt; strArg;</span><br><span class="line">        stream.flush<span class="literal">()</span>;</span><br><span class="line"></span><br><span class="line">        q<span class="constructor">Debug()</span> &lt;&lt; <span class="string">"Have already connected to server."</span>;</span><br><span class="line">        socket.wait<span class="constructor">ForBytesWritten()</span>;</span><br><span class="line">        m_bRunning = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// 如果不能连接到服务器,则创建</span></span><br><span class="line">        m_pServer = <span class="keyword">new</span> <span class="constructor">QLocalServer(<span class="params">this</span>)</span>;</span><br><span class="line"></span><br><span class="line">        connect(m_pServer, <span class="constructor">SIGNAL(<span class="params">newConnection</span>()</span>), this, <span class="constructor">SLOT(<span class="params">newLocalConnection</span>()</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m_pServer-&gt;listen(strServerName))&#123;</span><br><span class="line">            <span class="comment">// 防止程序崩溃,残留进程服务,直接移除</span></span><br><span class="line">            <span class="keyword">if</span> ((m_pServer-&gt;server<span class="constructor">Error()</span><span class="operator"> == </span>QAbstractSocket::AddressInUseError)</span><br><span class="line"><span class="operator">                    &amp;&amp; </span>QFile::exists(m_pServer-&gt;server<span class="constructor">Name()</span>))&#123;</span><br><span class="line">                QFile::remove(m_pServer-&gt;server<span class="constructor">Name()</span>);</span><br><span class="line">                m_pServer-&gt;listen(strServerName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SingleApplication::~<span class="constructor">SingleApplication()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> SingleApplication::is<span class="constructor">Running()</span></span><br><span class="line">&#123;</span><br><span class="line">    return m_bRunning;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void SingleApplication::set<span class="constructor">SingleMainWindow(QWidget <span class="operator">*</span><span class="params">w</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    m_widget = w;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void SingleApplication::<span class="keyword">new</span><span class="constructor">LocalConnection()</span></span><br><span class="line">&#123;</span><br><span class="line">    QLocalSocket *pSocket = m_pServer-&gt;next<span class="constructor">PendingConnection()</span>;</span><br><span class="line">    <span class="keyword">if</span> (pSocket != Q_NULLPTR)&#123;</span><br><span class="line">        pSocket-&gt;wait<span class="constructor">ForReadyRead(1000)</span>;</span><br><span class="line"></span><br><span class="line">        QTextStream <span class="keyword">in</span>(pSocket);</span><br><span class="line">        QString strValue;</span><br><span class="line">        <span class="keyword">in</span> &gt;&gt; strValue;</span><br><span class="line">        delete pSocket;</span><br><span class="line">        pSocket = Q_NULLPTR;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果窗口不为空,则前端显示</span></span><br><span class="line">        <span class="comment">//核心代码</span></span><br><span class="line">        <span class="keyword">if</span>(m_widget)&#123;</span><br><span class="line">            m_widget-&gt;show<span class="constructor">Maximized()</span>;</span><br><span class="line">            m_widget-&gt;activate<span class="constructor">Window()</span>;</span><br><span class="line">            m_widget-&gt;raise<span class="literal">()</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h2><p>别忘了在pro文件中加上网络依赖<br>QT += network</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"singleapplication.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">SingleApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (a.isRunning())&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    QDialog w;</span><br><span class="line">    w.show();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存指针用于显示</span></span><br><span class="line">    a.setSingleMainWindow(&amp;w);</span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h2><p>在Win7上可以随心所欲的运行,不料放到Ubuntu上之后崩的噼里啪啦,经过一番折腾终于找到个大坑</p><ol><li>连接服务器的代码要放到构造函数中</li><li>setApplicationName(QLatin1String(ApplicationName));中的参数要提前定义为static const char *</li></ol><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>在使用刘典武大神的代码时AppInit 也要放到SingleApplication的构造函数中,顺便说一句 QTimer::singleShot真香</p><h2 id="PPS"><a href="#PPS" class="headerlink" title="PPS"></a>PPS</h2><p>你没有看错,我确实把大神的CSDN博客给撸下来,做成了高清无码的PDF….<br>嗯,爬虫在手,天下我有…..</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在用Qt写程序时候可能遇到避免程序重复启动的问题,我们知道用MFC时有个FindWindow函数可以进行窗口查找于是想Qt能否实现呢,经过一番摸索和折腾终于搞定(测试环境为Win7和Ubuntu)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="单实例" scheme="https://liusblog.top/tags/%E5%8D%95%E5%AE%9E%E4%BE%8B/"/>
    
      <category term="QLocalServer" scheme="https://liusblog.top/tags/QLocalServer/"/>
    
      <category term="Designer" scheme="https://liusblog.top/tags/Designer/"/>
    
  </entry>
  
  <entry>
    <title>跟随Designer源码学Qt</title>
    <link href="https://liusblog.top/2019/06/24/%E8%B7%9F%E9%9A%8FDesigner%E6%BA%90%E7%A0%81%E5%AD%A6Qt/"/>
    <id>https://liusblog.top/2019/06/24/跟随Designer源码学Qt/</id>
    <published>2019-06-24T14:05:06.000Z</published>
    <updated>2020-02-23T05:43:27.960Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Qt说是非常优雅的C++实现,是跨平台的不二选择.在实际学习中,好多人都会遇到学到一个阶段后突然不知道该如何进行下去了.笔者经过连续几个月对着Designer的源码进行艰苦卓绝的奋斗,终于略有小成,准备写一个系列文章,希望能给你的学习带来一点思路…</p></blockquote><p>先大致列一个提纲</p><h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><ul><li>Drag and drop</li><li>QTreeView/视图/委托 </li><li>QUiLoader(ui文件加载器)</li><li>事件拦截器</li><li>script(Qt调用JS)</li><li>sql/database(数据库)</li><li>xml(xml文件读写)</li><li>QThread多线程</li><li>qscintilla富文本移植</li><li>qtxlsx移植</li><li>QTableView和数据库绑定</li><li>QTreeWiget的使用</li><li>信号,槽的高级用法和线程</li><li>ODBC和Oracle数据那些难缠的事</li><li>Qt正则表达式</li><li>Qt帮助系统的制作</li><li>多语言系统的制作</li><li>彩蛋制作</li><li>Qt工程文件的写法和黑科技</li><li>Qt单实例运行</li></ul><p>后面会补上链接</p><h2 id="彩蛋奉上"><a href="#彩蛋奉上" class="headerlink" title="彩蛋奉上"></a>彩蛋奉上</h2><p><img src="/../photos/跟随Designer源码学Qt/彩蛋.gif" alt="彩蛋"><br>敬请期待(to be continue….)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Qt说是非常优雅的C++实现,是跨平台的不二选择.在实际学习中,好多人都会遇到学到一个阶段后突然不知道该如何进行下去了.笔者经过连续几个月对着Designer的源码进行艰苦卓绝的奋斗,终于略有小成,准备写一个系列文章,希望能给你的学习带来一点思路…
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="Designer" scheme="https://liusblog.top/tags/Designer/"/>
    
      <category term="开源" scheme="https://liusblog.top/tags/%E5%BC%80%E6%BA%90/"/>
    
      <category term="源码" scheme="https://liusblog.top/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>分开旅行</title>
    <link href="https://liusblog.top/2019/06/21/%E5%88%86%E5%BC%80%E6%97%85%E8%A1%8C/"/>
    <id>https://liusblog.top/2019/06/21/分开旅行/</id>
    <published>2019-06-21T09:53:37.000Z</published>
    <updated>2020-02-23T05:43:27.958Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>众生皆苦…..</p></blockquote><h2 id="生而为人-已属不易-何苦要相互折磨"><a href="#生而为人-已属不易-何苦要相互折磨" class="headerlink" title="生而为人,已属不易,何苦要相互折磨?"></a>生而为人,已属不易,何苦要相互折磨?</h2><h2 id="纵使有千般不舍-万分难离"><a href="#纵使有千般不舍-万分难离" class="headerlink" title="纵使有千般不舍,万分难离"></a>纵使有千般不舍,万分难离</h2><h2 id="亦不如-彼此放手各自前行…"><a href="#亦不如-彼此放手各自前行…" class="headerlink" title="亦不如,彼此放手各自前行…"></a>亦不如,彼此放手各自前行…</h2><p><img src="/photos/分开旅行/分开旅行.jpg" alt="分开旅行"></p><audio id="video" controls="controls" preload="auto"><br>    <source src="/media/分开旅行/分开旅行.mp3" type="audio/mpeg"><br>    <p>Your user agent does not support the HTML5 Video element.</p><br></audio><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">我选择去洛杉矶</span><br><span class="line">你 一个人要飞向巴黎</span><br><span class="line">尊重各自的决定</span><br><span class="line">维持和平的爱情</span><br><span class="line">相爱是一种习题</span><br><span class="line">在自由和亲密中游移</span><br><span class="line">你问过太多次我爱不爱你</span><br><span class="line"><span class="keyword">Black </span><span class="keyword">Black </span>Heart</span><br><span class="line"><span class="symbol">Send</span>给你我的心</span><br><span class="line">计划是分开旅行啊</span><br><span class="line">为何像结局</span><br><span class="line">我明白 停在你的怀里</span><br><span class="line">却不一定在你心里</span><br><span class="line">巴黎下了一整天雨</span><br><span class="line">我不想要去证明</span><br><span class="line">也不知道怎样证明</span><br><span class="line">相爱是两人事情</span><br><span class="line">我不喜欢你怀疑</span><br><span class="line">怀疑爱是可怕的武器</span><br><span class="line">谋杀了爱情</span><br><span class="line">我在这里 本来是晴朗好天气</span><br><span class="line"><span class="keyword">Black </span><span class="keyword">Black </span>Heart</span><br><span class="line"><span class="symbol">Send</span>给你我的心</span><br><span class="line">计划是分开旅行啊</span><br><span class="line">为何像结局</span><br><span class="line">我明白 停在你的怀里</span><br><span class="line">却不一定在你心里</span><br><span class="line">巴黎下了一整天雨</span><br><span class="line"><span class="keyword">Black </span><span class="keyword">Black </span>Heart</span><br><span class="line"><span class="symbol">Send</span>给你我的心</span><br><span class="line">计划是分开旅行啊</span><br><span class="line">为何像结局</span><br><span class="line">我明白 停在你的怀里</span><br><span class="line">却不一定在你心里</span><br><span class="line">巴黎下了一整天雨</span><br><span class="line"><span class="keyword">Black </span><span class="keyword">Black </span>Heart</span><br><span class="line"><span class="symbol">Send</span>给你我的心</span><br><span class="line">计划是分开旅行啊</span><br><span class="line">为何像结局</span><br><span class="line">我明白 停在你的怀里</span><br><span class="line">却不一定在你心里</span><br><span class="line">巴黎下了一整天雨</span><br><span class="line">休息一下 不需要那么的密集</span><br><span class="line">不必每一秒钟都黏在一起</span><br><span class="line">你问我爱不爱你</span><br><span class="line">这个不是个问题</span><br><span class="line">早就说过需要空间才能继续</span><br><span class="line">我也真的不希望你离去</span><br><span class="line">我们就试试看各走各的路</span><br><span class="line">嘘 别哭</span><br><span class="line">这个只是个短短的度假</span><br><span class="line">别搞得那么复杂</span><br><span class="line">你不是一直说要去巴黎吗</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;众生皆苦…..&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;生而为人-已属不易-何苦要相互折磨&quot;&gt;&lt;a href=&quot;#生而为人-已属不易-何苦要相互折磨&quot; class=&quot;headerlink&quot; title=&quot;生而为人,已属不易,何苦要相互折
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="心情" scheme="https://liusblog.top/tags/%E5%BF%83%E6%83%85/"/>
    
  </entry>
  
  <entry>
    <title>Qt数据库removeDatabase注意事项</title>
    <link href="https://liusblog.top/2019/06/20/Qt%E6%95%B0%E6%8D%AE%E5%BA%93removeDatabase%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"/>
    <id>https://liusblog.top/2019/06/20/Qt数据库removeDatabase注意事项/</id>
    <published>2019-06-20T14:32:35.000Z</published>
    <updated>2020-02-23T05:43:27.956Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>起源:最近在研究一个项目, 其中用到了数据库,在数据库断开重连时会给出警告,经过一系列尝试终于搞定,网上找的方法大多数都是抄来抄去,很是无语…</p></blockquote><h2 id="警告示例"><a href="#警告示例" class="headerlink" title="警告示例"></a>警告示例</h2><p>内容为:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QSqlDatabasePrivate::removeDatabase:<span class="built_in"> connection </span><span class="string">'qt_sql_default_connection'</span> is still <span class="keyword">in</span> use, all queries will cease <span class="keyword">to</span> work</span><br></pre></td></tr></table></figure></p><p>如下图所示<br><img src="/photos/Qt数据库removeDatabase注意事项/警告.png" alt="图片"></p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ul><li>在每一次数据库打开时先把原有连接关闭,</li><li>特别值得注意的是,在<strong>打开失败</strong>时也要关闭连接</li></ul><p>核心代码如下<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">connectDataBase</span><span class="params">(QString dbName, QString type,</span></span></span><br><span class="line"><span class="function"><span class="params">                                      QString host, <span class="keyword">int</span> port,</span></span></span><br><span class="line"><span class="function"><span class="params">                                      QString userName, QString passWd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//关闭已有连接,将m_db重置</span></span><br><span class="line">    closeDataBase();</span><br><span class="line"></span><br><span class="line">    m_db = QSqlDatabase::addDatabase(type);</span><br><span class="line"></span><br><span class="line">    m_db.setHostName(host);</span><br><span class="line">    m_db.setPort(port);</span><br><span class="line">    m_db.setUserName(userName);</span><br><span class="line">    m_db.setPassword(passWd);</span><br><span class="line">    m_db.setDatabaseName(dbName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!m_db.<span class="built_in">open</span>()) &#123;</span><br><span class="line">        closeDataBase();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">closeDataBase</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        QString connectionName = m_db.connectionName();</span><br><span class="line">        m_db.<span class="built_in">close</span>();</span><br><span class="line"></span><br><span class="line">        m_db = QSqlDatabase();</span><br><span class="line">        m_db.removeDatabase(connectionName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>一般不会遇到该问题,除非是多次打开重连,一般在使用时只需要使用局部变量保存database就行了,不过笔者遇到的情况比较特殊,恩,效果还是不错的….</p><h2 id="PPS"><a href="#PPS" class="headerlink" title="PPS"></a>PPS</h2><ul><li>Qt遇到问题时,首先参照自带例子</li><li>尝试到Stack Overflow上去找答案</li><li>搜索引擎首推google,但是如果你不会科学上网还是将就用<a href="https://bing.com" target="_blank" rel="noopener">必应</a>吧</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;起源:最近在研究一个项目, 其中用到了数据库,在数据库断开重连时会给出警告,经过一系列尝试终于搞定,网上找的方法大多数都是抄来抄去,很是无语…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;警告示例&quot;&gt;&lt;a href=&quot;#警告示例&quot; clas
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="QWidget" scheme="https://liusblog.top/tags/QWidget/"/>
    
      <category term="QSqlDatabasePrivate" scheme="https://liusblog.top/tags/QSqlDatabasePrivate/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu编译FFMPEG和ffplay</title>
    <link href="https://liusblog.top/2019/05/21/ubuntu%E7%BC%96%E8%AF%91FFMPEG%E5%92%8Cffplay/"/>
    <id>https://liusblog.top/2019/05/21/ubuntu编译FFMPEG和ffplay/</id>
    <published>2019-05-21T12:44:53.000Z</published>
    <updated>2020-02-23T05:43:27.958Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近突然又想研究音视频了,当然作为音视频领域必备技能FFMPEG是要了解的,本文从编译开始,希望这次能有点建树…</p></blockquote><h2 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h2><p>到官网上下载,<a href="https://ffmpeg.org/download.html" target="_blank" rel="noopener">FFMPEG官网</a></p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ol><li>不管三七二十一直接开干<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="/photos/ubuntu编译FFMPEG和ffplay/提示安装yasm.png" alt="提示错误"><br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> yasm</span><br></pre></td></tr></table></figure></p><ol start="2"><li>安装SDL<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> libsdl2-dev</span><br></pre></td></tr></table></figure></li></ol><p>安装完后再配置会自动的能产生ffplay</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./configure</span></span><br></pre></td></tr></table></figure><p>如果想支持ssl请加上  –enable-openssl 并且安装 openssl, libssl-dev</p><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>为了加快编译速度,加上-j参数<br><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> -j8</span><br></pre></td></tr></table></figure></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make <span class="keyword">install</span></span><br></pre></td></tr></table></figure><h2 id="测试程序"><a href="#测试程序" class="headerlink" title="测试程序"></a>测试程序</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//命令行测试:ffmpeg -version</span></span><br><span class="line"><span class="comment">//文件名:   helloFFmpeg.c</span></span><br><span class="line"><span class="comment">//编译命令: gcc -o helloFFmpeg helloFFmpeg.c -lavcodec -lavdevice  -lswresample -lavformat -lavcodec -lavutil -lswscale  -lGL -lm -lz -lpthread `pkg-config --cflags --libs sdl2`</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"libavcodec/avcodec.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s"</span>, avcodec_configuration());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;最近突然又想研究音视频了,当然作为音视频领域必备技能FFMPEG是要了解的,本文从编译开始,希望这次能有点建树…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;下载源码&quot;&gt;&lt;a href=&quot;#下载源码&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="音视频" scheme="https://liusblog.top/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/"/>
    
    
      <category term="FFMPEG" scheme="https://liusblog.top/tags/FFMPEG/"/>
    
      <category term="C" scheme="https://liusblog.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>发现一个学习英语的软件</title>
    <link href="https://liusblog.top/2019/04/27/%E5%8F%91%E7%8E%B0%E4%B8%80%E4%B8%AA%E5%AD%A6%E4%B9%A0%E8%8B%B1%E8%AF%AD%E7%9A%84%E8%BD%AF%E4%BB%B6/"/>
    <id>https://liusblog.top/2019/04/27/发现一个学习英语的软件/</id>
    <published>2019-04-27T12:36:26.000Z</published>
    <updated>2020-02-23T05:43:27.958Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>发现了一个学习英语的软件叫做 <strong>voscreen</strong></p></blockquote><h2 id="知乎推荐"><a href="#知乎推荐" class="headerlink" title="知乎推荐"></a>知乎推荐</h2><p><img src="/photos/发现一个学习英语的软件/知乎推荐.png" alt="知乎推荐"></p><h2 id="网站地址"><a href="#网站地址" class="headerlink" title="网站地址"></a>网站地址</h2><p><a href="https://voscreen.com/" target="_blank" rel="noopener">voscreen主页</a><br>真香,谁用谁知道!</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><video id="video" controls preload="auto"><br>    <source id="mp4" src="/media/发现一个学习英语的软件/小黄人.mp4" type="video/mp4"><br>    <p>Your user agent does not support the HTML5 Video element.</p><br></video><h2 id="页面插入视频的方法"><a href="#页面插入视频的方法" class="headerlink" title="页面插入视频的方法"></a>页面插入视频的方法</h2><ul><li><p>使用Video标签(效果见上面)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"video"</span> <span class="attr">controls</span>=<span class="string">"controls"</span> <span class="attr">preload</span>=<span class="string">"auto"</span> <span class="attr">style</span>=<span class="string">"width:100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">id</span>=<span class="string">"mp4"</span> <span class="attr">src</span>=<span class="string">"/media/发现一个学习英语的软件/小黄人.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Your user agent does not support the HTML5 Video element.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>使用iframe(这个github不支持)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">height</span>=<span class="string">498</span> <span class="attr">width</span>=<span class="string">510</span> <span class="attr">src</span>=<span class="string">"http://player.youku.com/embed/XNjcyMDU4Njg0"</span> <span class="attr">frameborder</span>=<span class="string">0</span> <span class="attr">allowfullscreen</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;发现了一个学习英语的软件叫做 &lt;strong&gt;voscreen&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;知乎推荐&quot;&gt;&lt;a href=&quot;#知乎推荐&quot; class=&quot;headerlink&quot; title=&quot;知乎推荐&quot;&gt;&lt;/a
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="软件" scheme="https://liusblog.top/tags/%E8%BD%AF%E4%BB%B6/"/>
    
      <category term="英语" scheme="https://liusblog.top/tags/%E8%8B%B1%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>linux环境pip3镜像配置</title>
    <link href="https://liusblog.top/2019/04/25/linux%E7%8E%AF%E5%A2%83pip3%E9%85%8D%E7%BD%AE/"/>
    <id>https://liusblog.top/2019/04/25/linux环境pip3配置/</id>
    <published>2019-04-25T14:12:49.000Z</published>
    <updated>2020-02-23T05:43:27.957Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>手残升级Ubuntu到了19.04,突然发现自己写的<strong>必应词典</strong>失效了,但是下载速度炒鸡慢,于是就有了下文</p></blockquote><h2 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h2><p><img src="/photos/linux环境pip3镜像配置/我的老目录.png" alt="必须来张图"></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/" target="_blank" rel="noopener">清华网站参考</a></p><h2 id="临时使用"><a href="#临时使用" class="headerlink" title="临时使用"></a>临时使用</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> -i https://pypi.tuna.tsinghua.edu.cn/simple <span class="keyword">some</span>-<span class="keyword">package</span></span><br></pre></td></tr></table></figure><h2 id="设置为默认"><a href="#设置为默认" class="headerlink" title="设置为默认"></a>设置为默认</h2><ul><li><p>使用命令</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip config <span class="keyword">set</span> <span class="keyword">global</span>.<span class="built_in">index</span>-url http<span class="variable">s:</span>//pypi.tuna.tsinghua.edu.<span class="keyword">cn</span>/simple</span><br></pre></td></tr></table></figure></li><li><p>或者直接写文件</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="built_in">index</span>-url = http<span class="variable">s:</span>//pypi.tuna.tsinghua.edu.<span class="keyword">cn</span>/simple</span><br></pre></td></tr></table></figure></li></ul><h2 id="重要点"><a href="#重要点" class="headerlink" title="重要点"></a>重要点</h2><p>上述的方法只能是给pip用,要想pip3也是一样执行命令<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp .<span class="built_in">config</span>/pip/pip.conf .<span class="built_in">config</span>/pip3/</span><br></pre></td></tr></table></figure></p><h2 id="常用python包"><a href="#常用python包" class="headerlink" title="常用python包"></a>常用python包</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bencode</span>                         <span class="string"></span></span><br><span class="line"><span class="attr">bs4</span>                              <span class="string"></span></span><br><span class="line"><span class="attr">PyPDF2</span></span><br><span class="line"><span class="attr">PyQt5</span></span><br><span class="line"><span class="attr">ckeditor</span>                         <span class="string"></span></span><br><span class="line"><span class="attr">ckeditor_uploader</span>             <span class="string"></span></span><br><span class="line"><span class="attr">django</span>                                   <span class="string"></span></span><br><span class="line"><span class="attr">request</span></span><br><span class="line"><span class="attr">termcolor</span></span><br><span class="line"><span class="attr">virtualenv</span>              <span class="string"></span></span><br><span class="line"><span class="attr">lxml</span>                          <span class="string"></span></span><br><span class="line"><span class="attr">markdown</span>                         <span class="string"></span></span><br><span class="line"><span class="attr">xlrd</span></span><br><span class="line"><span class="attr">pdfkit</span>                           <span class="string"></span></span><br><span class="line"><span class="attr">xlwt</span></span><br><span class="line"><span class="attr">playsound</span>       <span class="string"></span></span><br><span class="line"><span class="attr">you_get</span></span><br></pre></td></tr></table></figure><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p><a href="https://github.com/spygg/bydict/" target="_blank" rel="noopener">必应词典github链接</a><br><img src="/photos/linux环境pip3镜像配置/必应词典.png" alt="必应词典"></p><blockquote><p>记录下加快效率</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;手残升级Ubuntu到了19.04,突然发现自己写的&lt;strong&gt;必应词典&lt;/strong&gt;失效了,但是下载速度炒鸡慢,于是就有了下文&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;图示&quot;&gt;&lt;a href=&quot;#图示&quot; class=&quot;head
      
    
    </summary>
    
      <category term="Linux" scheme="https://liusblog.top/categories/Linux/"/>
    
    
      <category term="软件使用" scheme="https://liusblog.top/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
    
      <category term="python" scheme="https://liusblog.top/tags/python/"/>
    
      <category term="pip3" scheme="https://liusblog.top/tags/pip3/"/>
    
  </entry>
  
  <entry>
    <title>给页面所有的图片加上全屏预览功能</title>
    <link href="https://liusblog.top/2019/04/21/%E7%BB%99%E9%A1%B5%E9%9D%A2%E6%89%80%E6%9C%89%E7%9A%84%E5%9B%BE%E7%89%87%E5%8A%A0%E4%B8%8A%E5%85%A8%E5%B1%8F%E9%A2%84%E8%A7%88%E5%8A%9F%E8%83%BD/"/>
    <id>https://liusblog.top/2019/04/21/给页面所有的图片加上全屏预览功能/</id>
    <published>2019-04-21T14:04:52.000Z</published>
    <updated>2020-02-23T05:43:27.959Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在使用主题snippet时候,图片不能全屏预览,于是自己动手写了一个,还是可以使用的</p></blockquote><h2 id="示意图"><a href="#示意图" class="headerlink" title="示意图"></a>示意图</h2><p><img src="/photos/给页面所有的图片加上全屏预览功能/demo.png" alt="demo"></p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/tholman/intense-images" target="_blank" rel="noopener">intense</a><br>但是这玩意有bug</p><h2 id="食用方法"><a href="#食用方法" class="headerlink" title="食用方法"></a>食用方法</h2><ul><li>在页面的head部分script中加入javscript代码,同时引入css代码</li><li>具体情况时需要改变js中的<strong>post-body</strong>  var imgs = document.getElementsByClassName(‘post-body’)[0].getElementsByTagName(‘img’)</li><li>对不需要展示的图片加上 <em>class_no_full_screen</em> 类</li><li>如果要修改背景色请修改<em>background: rgba(255, 255, 255,0.8);</em>这一句</li></ul><h2 id="直接上干货"><a href="#直接上干货" class="headerlink" title="直接上干货"></a>直接上干货</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理:"></a>原理:</h3><ul><li>查找所有的图片</li><li>在图片点击时候获取图片地址</li><li>在页面末尾插入一个div,div中插入一个img(地址为点击图片的地址)</li><li>设置div样式为全屏,透明</li></ul><h3 id="javscript-代码"><a href="#javscript-代码" class="headerlink" title="javscript 代码"></a>javscript 代码</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> obj.className.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">addClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (!<span class="keyword">this</span>.hasClass(obj, cls)) obj.className += <span class="string">" "</span> + cls;</span></span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">removeClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line">        if (hasClass(obj, cls)) &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>);</span></span><br><span class="line"><span class="actionscript">            obj.className = obj.className.replace(reg, <span class="string">' '</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> imgAll = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'post-body'</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(imgAll == <span class="literal">undefined</span>)&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">            </span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> imgs = imgAll.getElementsByTagName(<span class="string">'img'</span>)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;imgs.length;i++)&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//如果设置非全屏标志则跳过</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(hasClass(imgs[i],<span class="string">'class_no_full_screen'</span>))&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">continue</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">    </span><br><span class="line"><span class="actionscript">            imgs[i].setAttribute(<span class="string">'style'</span>, <span class="string">"cursor: zoom-in"</span>);</span></span><br><span class="line"><span class="actionscript">            imgs[i].onclick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line">            </span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> section=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"section"</span>)[<span class="number">0</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> imgView = <span class="built_in">document</span>.getElementById(<span class="string">'imgViewDom'</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(imgView == <span class="literal">undefined</span>)&#123;</span></span><br><span class="line"><span class="javascript">                    imgView=<span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">                    imgView.id = <span class="string">"imgViewDom"</span>;</span></span><br><span class="line"></span><br><span class="line">                    section.appendChild(imgView)</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    imgView.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                        addClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"><span class="actionscript">                        imgView.innerHTML=<span class="string">""</span>;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        </span><br><span class="line"><span class="actionscript">                imgView.innerHTML=<span class="string">"&lt;img id = 'jackslowfuck' src="</span> + <span class="keyword">this</span>.src + <span class="string">" style='cursor: zoom-out; max-width: 100%;'"</span> + <span class="string">"&gt;"</span>;</span></span><br><span class="line"><span class="actionscript">                removeClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> jackslowfuck = <span class="built_in">document</span>.getElementById(<span class="string">'jackslowfuck'</span>);</span></span><br><span class="line"><span class="actionscript">                jackslowfuck.onclick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    addClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"><span class="actionscript">                    imgView.innerHTML=<span class="string">""</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;/<span class="name">scirpt</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><h3 id="css代码"><a href="#css代码" class="headerlink" title="css代码"></a>css代码</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#imgViewDom</span> &#123;</span></span><br><span class="line">        display: none;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">        z-index: 99999999;</span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0,0<span class="selector-class">.7</span>);</span></span><br><span class="line">        overflow: auto;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        -webkit-box-align: center;</span><br><span class="line">        -webkit-box-pack: center;</span><br><span class="line">        display: -moz-box;</span><br><span class="line">        -moz-box-align: center;</span><br><span class="line">        -moz-box-pack: center;</span><br><span class="line">        display: -o-box;</span><br><span class="line">        -o-box-align: center;</span><br><span class="line">        -o-box-pack: center;</span><br><span class="line">        display: -ms-box;</span><br><span class="line">        -ms-box-align: center;</span><br><span class="line">        -ms-box-pack: center;</span><br><span class="line">        display: box;</span><br><span class="line">        box-align: center;</span><br><span class="line">        box-pack: center;</span><br><span class="line">        cursor: zoom-out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.disnone</span>&#123;</span></span><br><span class="line">        display: none !important;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><p>我是javascript菜鸟,如果有打包好的请联系告知本人</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在使用主题snippet时候,图片不能全屏预览,于是自己动手写了一个,还是可以使用的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;示意图&quot;&gt;&lt;a href=&quot;#示意图&quot; class=&quot;headerlink&quot; title=&quot;示意图&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="html" scheme="https://liusblog.top/tags/html/"/>
    
      <category term="javascipt" scheme="https://liusblog.top/tags/javascipt/"/>
    
  </entry>
  
  <entry>
    <title>github傻瓜的食用方法</title>
    <link href="https://liusblog.top/2019/04/15/github%E5%82%BB%E7%93%9C%E7%9A%84%E9%A3%9F%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://liusblog.top/2019/04/15/github傻瓜的食用方法/</id>
    <published>2019-04-15T15:06:39.000Z</published>
    <updated>2020-02-23T05:43:27.957Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>github 作为全球最大的同性交友网站,是作为程序员的我们必备网站之一,本文就简单的使用做个介绍</p></blockquote><p><img src="/photos/github傻瓜的食用方法/git和github.jpeg" alt="git"></p><h2 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h2><ol><li>首先在本地创建ssh key；<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh-keygen -t rsa -C <span class="string">"your_email@youremail.com"</span></span><br></pre></td></tr></table></figure></li></ol><p>后面的<a href="mailto:your_email@youremail.com" target="_blank" rel="noopener">your_email@youremail.com</a>改为你在github上注册的邮箱,之后会要求确认路径和输入密码,我们这使用默认的一路回车就行.成功的话会在~/下生成.ssh文件夹,进去,打开id_rsa.pub,复制里面的key.</p><ol start="2"><li><p>回到github上,进入 Account Settings（账户配置）,左边选择SSH Keys,Add SSH Key,title随便填,粘贴在你电脑上生成的key.</p></li><li><p>为了验证是否成功,在git bash下输入：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh -T git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure></li></ol><p>如果是第一次的会提示是否continue,输入yes就会看到：You’ve successfully authenticated, but GitHub does not provide shell access .这就表示已成功连上github.</p><ol start="4"><li>接下来我们要做的就是把本地仓库传到github上去,在此之前还需要设置username和email,因为github每次commit都会记录他们.</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git<span class="built_in"> config </span>--global user.name <span class="string">"your name"</span></span><br><span class="line">$ git<span class="built_in"> config </span>--global user.email <span class="string">"your_email@youremail.com"</span></span><br></pre></td></tr></table></figure><h2 id="将一个已有的工程上传到github的最简便方法"><a href="#将一个已有的工程上传到github的最简便方法" class="headerlink" title="将一个已有的工程上传到github的最简便方法"></a>将一个已有的工程上传到github的最简便方法</h2><ul><li>到github上去新建一个当前工程命名的仓库</li><li><p>执行git clone 新建的仓库地址</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">git</span>@github.com:spygg/xxxx.git</span><br></pre></td></tr></table></figure></li><li><p>将工程下的所有文件拷贝到上一步xxx目录中</p></li><li>执行命令三部曲<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span> .</span><br><span class="line">git comment -m <span class="string">"说明xxxxxxxxxx"</span></span><br><span class="line">git <span class="keyword">push</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><ul><li>更新仓库还是命令三部曲</li><li>如果系统是windows请自行安装git(我是ubuntu自带的,自豪一下(<em>^__^</em>)</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;github 作为全球最大的同性交友网站,是作为程序员的我们必备网站之一,本文就简单的使用做个介绍&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/photos/github傻瓜的食用方法/git和github.jpeg&quot; alt=
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="git" scheme="https://liusblog.top/tags/git/"/>
    
      <category term="github" scheme="https://liusblog.top/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu触摸板调教</title>
    <link href="https://liusblog.top/2019/04/14/Ubuntu%E8%A7%A6%E6%91%B8%E6%9D%BF%E8%B0%83%E6%95%99/"/>
    <id>https://liusblog.top/2019/04/14/Ubuntu触摸板调教/</id>
    <published>2019-04-14T12:22:49.000Z</published>
    <updated>2020-02-23T05:43:27.957Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文主要解决笔记本打字时误触的问题,并且在没有鼠标的时候自动识别</p></blockquote><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol><li>安装touchpad-indicator(这个因为好久的项目,貌似在鼠标插拔时有bug)</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:atareao/atareao</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install touchpad-indicator</span><br></pre></td></tr></table></figure><p>可以设置为开机自启动,当检测到鼠标插入的时候禁用触摸板,或者只是打字的时候禁用就行非常方便(不推荐)</p><ol start="2"><li><p>使用命令行</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sudo</span> <span class="string">rmmod psmouse    这个是禁用的</span></span><br><span class="line"><span class="attr">sudo</span> <span class="string">modprobe psmouse 这个是启用的</span></span><br></pre></td></tr></table></figure></li><li><p>使用GNOME Shell Extension安装(推荐)</p></li></ol><p>在Ubuntu软件中心里搜索 Touchpad Indicator的扩展,并安装,非常简单易用</p><p>下图是我的设置供参考<br><img src="/photos/Ubuntu触摸板调教/设置图.png" alt="设置图"></p><h2 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h2><p>作为一个程序员,首先关心的就是能否自己实现,下面分两种系统进行浅析</p><ol><li><p>Linux 系统</p><ul><li><p>命令行:</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xinput --list 获取所有设备列表</span><br><span class="line">或者cat /proc/bus/input/devices获取所有设备详细信息</span><br><span class="line"></span><br><span class="line">禁用设备:xinput <span class="built_in">set</span>-prop <span class="string">"id"</span> <span class="string">"Device Enabled"</span> 0</span><br><span class="line">启用设备:xinput <span class="built_in">set</span>-prop <span class="string">"10"</span> <span class="string">"Device Enabled"</span> 1</span><br></pre></td></tr></table></figure><p>通过上述命令然后定时获取鼠标的在线情况,然后启动或者禁用触摸板,或者通过事件机制</p></li><li><p>编程: 大致分为两步</p><p>  ①通过netlinksocket</p><p>  ②使用udev编写规则</p><p>C语言代码实现</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/un.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ioctl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;linux/netlink.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> UEVENT_BUFFER_SIZE 2048</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">init_hotplug_sock</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_nl</span> <span class="title">snl</span>;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">int</span> buffer_size = <span class="number">16</span> * <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line">    <span class="keyword">int</span> retval = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(&amp;snl, <span class="number">0</span>, <span class="keyword">sizeof</span>(snl));</span><br><span class="line">    snl.nl_family = AF_NETLINK;</span><br><span class="line">    snl.nl_pid = getpid();</span><br><span class="line">    snl.nl_groups = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> hotplug_sock = socket(PF_NETLINK, SOCK_DGRAM, NETLINK_KOBJECT_UEVENT);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(hotplug_sock == <span class="number">-1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"error gettting socket %s\n"</span>, strerror(errno));</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    setsockopt(hotplug_sock, SOL_SOCKET, SO_RCVBUFFORCE, &amp;buffer_size, <span class="keyword">sizeof</span>(buffer_size));</span><br><span class="line"></span><br><span class="line">    retval = bind(hotplug_sock, (struct sockaddr *)&amp;snl, <span class="keyword">sizeof</span>(struct sockaddr_nl));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(retval &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"bind failed %s\n"</span>, strerror(errno));</span><br><span class="line">        <span class="built_in">close</span>(hotplug_sock);</span><br><span class="line">        hotplug_sock = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> hotplug_sock;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello Deivce!\n"</span>);</span><br><span class="line">    <span class="keyword">int</span> hotplug_sock = init_hotplug_sock();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">char</span> buf[UEVENT_BUFFER_SIZE * <span class="number">2</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">        recv(hotplug_sock, &amp;buf, <span class="keyword">sizeof</span>(buf), <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, buf);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>window系统</p><ul><li><p>通过注册表</p></li><li><p>通过消息WM_DEVICECHANGE OndeviceChange()实现</p></li></ul></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文主要解决笔记本打字时误触的问题,并且在没有鼠标的时候自动识别&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;解决方案&quot;&gt;&lt;a href=&quot;#解决方案&quot; class=&quot;headerlink&quot; title=&quot;解决方案&quot;&gt;&lt;/a&gt;解决方案&lt;/h
      
    
    </summary>
    
      <category term="Linux" scheme="https://liusblog.top/categories/Linux/"/>
    
    
      <category term="软件使用" scheme="https://liusblog.top/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>Linux下Qt工程文件打开方式关联</title>
    <link href="https://liusblog.top/2019/04/13/Linux%E4%B8%8BQt%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F%E5%85%B3%E8%81%94/"/>
    <id>https://liusblog.top/2019/04/13/Linux下Qt工程文件打开方式关联/</id>
    <published>2019-04-13T13:53:39.000Z</published>
    <updated>2020-02-23T05:43:27.955Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>亲测可用!!!! 记住一点:技术问题千万不要百度,最好google起码必应<a href="http://www.bing.com" target="_blank" rel="noopener">www.bing.com</a></p></blockquote><h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p>按照惯例先上效果图<br><img src="/photos/Linux下Qt工程文件打开方式关联/效果图.png" alt="效果图"></p><p>在linux安装Qt后默认的工程文件.pro是用gedit打开的,而且比较恶心的是右键打开后还选择不了,网上的不少方法要么设置后影响到一般文本文件的打开,要不没有用,根本原因是:linux将.pro文件作为一般的text/plain来处理了</p><h2 id="设置步骤"><a href="#设置步骤" class="headerlink" title="设置步骤"></a>设置步骤</h2><ol><li>建立一个.xml文件,文件名格式必须为xxx-xxx.xml如 <em>DigiaQt-QtProject.xml</em>,内容如下:</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version='1.0'?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mime-info</span> <span class="attr">xmlns</span>=<span class="string">'http://www.freedesktop.org/standards/shared-mime-info'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mime-type</span> <span class="attr">type</span>=<span class="string">"text/qt"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">comment</span>&gt;</span>Qt Project Files<span class="tag">&lt;/<span class="name">comment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">glob</span> <span class="attr">pattern</span>=<span class="string">"*.pro"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mime-type</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mime-info</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>命令行输入 <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xdg-mime install DigiaQt-<span class="module-access"><span class="module"><span class="identifier">QtProject</span>.</span></span>xml</span><br></pre></td></tr></table></figure></li></ol><p>其中install 为第一步中的文件名</p><ol start="3"><li>编辑/usr/share/applications/defaults.list 文件,添加以下内容 </li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">text/<span class="attribute">qt</span>=DigiaQt-qtcreator-community.desktop</span><br></pre></td></tr></table></figure><ol start="4"><li><p>修改默认pro图标,不然在一堆文件中很难找到</p><p> 4.1 拷贝图片 QT安装路径/Docs/Qt-5.9.1/qtdoc/images/icon_QtCreator_78x78px.png图片到桌面</p><p> 4.2 用图片编辑器另存为text-qt.svg  文件名必须和第一步中的mime-type type一致</p><p> 4.3 拷贝图片到目录</p> <figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp text-qt.svg <span class="meta-keyword">/usr/</span>share<span class="meta-keyword">/icons/</span>Humanity<span class="meta-keyword">/mimes/</span><span class="number">64</span>/    </span><br><span class="line">sudo cp text-qt.svg <span class="meta-keyword">/usr/</span>share<span class="meta-keyword">/icons/</span>Humanity<span class="meta-keyword">/mimes/</span><span class="number">48</span>/ </span><br><span class="line">sudo cp text-qt.svg <span class="meta-keyword">/usr/</span>share<span class="meta-keyword">/icons/</span>Humanity<span class="meta-keyword">/mimes/</span><span class="number">128</span>/</span><br></pre></td></tr></table></figure><p> 4.4 更新图标缓存</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gtk-<span class="keyword">update</span>-icon-<span class="keyword">cache</span> /usr/<span class="keyword">share</span>/icons/Humanity</span><br></pre></td></tr></table></figure></li></ol><p>其中第一步和第二步必须有,第三步如果还是双击后不是QtCreator打开.pro文件在执行吧</p><p>这里解释下DigiaQt-qtcreator-community.desktop 在/usr/share/applications/目录下,为Qt安装时候自动生成的,如果没有请自行建立该文件</p><p>我的内容如下:<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Desktop Entry]</span></span><br><span class="line"><span class="attr">Type</span>=Application</span><br><span class="line"><span class="attr">Exec</span>=/opt/Qt5.<span class="number">9.1</span>/Tools/QtCreator/bin/qtcreator</span><br><span class="line"><span class="attr">Name</span>=Qt Creator (Community)</span><br><span class="line"><span class="attr">GenericName</span>=The IDE of choice for Qt development.</span><br><span class="line"><span class="attr">Icon</span>=QtProject-qtcreator</span><br><span class="line"><span class="attr">StartupWMClass</span>=qtcreator</span><br><span class="line"><span class="attr">Terminal</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">Categories</span>=Development<span class="comment">;IDE;Qt;</span></span><br><span class="line"><span class="attr">MimeType</span>=text/x-c++src<span class="comment">;text/x-c++hdr;text/x-xsrc;application/x-designer;application/vnd.qt.qmakeprofile;application/vnd.qt.xml.resource;text/x-qml;text/x-qt.qml;text/x-qt.qbs;</span></span><br></pre></td></tr></table></figure></p><h2 id="文章参考链接"><a href="#文章参考链接" class="headerlink" title="文章参考链接"></a>文章参考链接</h2><ol><li><p><a href="https://linux.die.net/man/1/xdg-mime" target="_blank" rel="noopener">xdg-mime</a></p></li><li><p><a href="https://askubuntu.com/questions/183089/default-program-for-opening-pro-qt-project-files" target="_blank" rel="noopener">default-program-for-opening-pro-qt-project-files</a></p></li></ol><blockquote><p>Linux自定义文件打开方式也可参照文本</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;亲测可用!!!! 记住一点:技术问题千万不要百度,最好google起码必应&lt;a href=&quot;http://www.bing.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.bing.com&lt;/a&gt;&lt;/p&gt;
&lt;/blo
      
    
    </summary>
    
      <category term="Linux" scheme="https://liusblog.top/categories/Linux/"/>
    
    
      <category term="Qt" scheme="https://liusblog.top/tags/Qt/"/>
    
      <category term="软件使用" scheme="https://liusblog.top/tags/%E8%BD%AF%E4%BB%B6%E4%BD%BF%E7%94%A8/"/>
    
  </entry>
  
  <entry>
    <title>基于snippet主题在github上搭建博客</title>
    <link href="https://liusblog.top/2019/04/13/%E5%9F%BA%E4%BA%8Esnippet%E4%B8%BB%E9%A2%98%E5%9C%A8github%E4%B8%8A%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://liusblog.top/2019/04/13/基于snippet主题在github上搭建博客/</id>
    <published>2019-04-13T13:16:41.000Z</published>
    <updated>2020-02-23T10:38:07.383Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>折腾了一通之后,还是更喜欢 snippet 主题,并且发誓不在折腾了,好吧,我开玩笑的呢!</p></blockquote><p>本人也做了一个动态的不过没买服务器,如下图所示<br><img src="/photos/基于snippet主题在github上搭建博客/我的动态网页.png" alt="我的动态网页"></p><p><a href="https://www.91h5.cc/" target="_blank" rel="noopener">主题官网</a><br><a href="https://github.com/shenliyang/hexo-theme-snippet" target="_blank" rel="noopener">主题 github</a></p><h2 id="插入广告-google-Ads"><a href="#插入广告-google-Ads" class="headerlink" title="插入广告(google Ads)"></a>插入广告(google Ads)</h2><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><ol><li>到谷歌广告<a href="https://www.google.com/intl/zh-CN_cn/adsense/start/#/?modal_active=none" target="_blank" rel="noopener">主页</a>,注册和登录</li><li>打开文件 hexo-theme-snippet/layout/head.ejs 在头部加入以下代码</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  (adsbygoogle = <span class="built_in">window</span>.adsbygoogle || []).push(&#123;</span></span><br><span class="line"><span class="actionscript">    google_ad_client: <span class="string">"ca-pub-7854187021513757"</span>,</span></span><br><span class="line"><span class="actionscript">    enable_page_level_ads: <span class="literal">true</span></span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">       <span class="function"><span class="keyword">function</span> <span class="title">IsPC</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">         <span class="keyword">var</span> userAgentInfo = navigator.userAgent;</span></span><br><span class="line"><span class="actionscript">         <span class="keyword">var</span> Agents = [<span class="string">"Android"</span>, <span class="string">"iPhone"</span>];</span></span><br><span class="line"><span class="actionscript">         <span class="keyword">var</span> flag = <span class="literal">true</span>;</span></span><br><span class="line"><span class="actionscript">         <span class="keyword">for</span> (<span class="keyword">var</span> v = <span class="number">0</span>; v &lt; Agents.length; v++) &#123;</span></span><br><span class="line">           if (userAgentInfo.indexOf(Agents[v]) &gt; 0) &#123;</span><br><span class="line"><span class="actionscript">             flag = <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">             <span class="keyword">break</span>;</span></span><br><span class="line">           &#125;</span><br><span class="line">         &#125;</span><br><span class="line"><span class="actionscript">         <span class="keyword">return</span> flag;</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">       <span class="comment">//页面加载完成后在根据是否是电脑进行加载广告</span></span></span><br><span class="line"><span class="javascript">       <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">           <span class="comment">// 谷歌广告</span></span></span><br><span class="line">           if(IsPC())&#123;</span><br><span class="line"><span class="javascript">               <span class="keyword">var</span> googleAds = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'googleAd'</span>);</span></span><br><span class="line"><span class="actionscript">               <span class="keyword">if</span>(googleAds != <span class="literal">undefined</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                   <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; googleAds.length; i++) &#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">                       googleAds[i].innerHTML = '<span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">"adsbygoogle"</span>\</span></span></span></span><br><span class="line"><span class="actionscript">                            style=<span class="string">"display:block; text-align:center;"</span>\</span></span><br><span class="line"><span class="actionscript">                            data-ad-layout=<span class="string">"in-article"</span>\</span></span><br><span class="line"><span class="actionscript">                            data-ad-format=<span class="string">"fluid"</span>\</span></span><br><span class="line"><span class="actionscript">                            data-ad-client=<span class="string">"ca-pub-7854187021513757"</span>\</span></span><br><span class="line"><span class="actionscript">                            data-ad-slot=<span class="string">"4637472251"</span>&gt;\</span></span><br><span class="line"><span class="handlebars"><span class="xml">                       <span class="tag">&lt;/<span class="name">ins</span>&gt;</span>'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                       <span class="keyword">var</span> scriptFun = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span></span><br><span class="line"><span class="actionscript">                       scriptFun.text = <span class="string">"(adsbygoogle = window.adsbygoogle || []).push(&#123;&#125;);"</span>;</span></span><br><span class="line">                       googleAds[i].appendChild(scriptFun);</span><br><span class="line"><span class="actionscript">                       <span class="comment">// end</span></span></span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">           .......</span><br></pre></td></tr></table></figure><ol start="3"><li>等待回信</li><li>在 source 目录下新建 ads.txt 内容如下</li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">google.com, pub<span class="number">-7854187021513757</span>, <span class="keyword">DIRECT, </span>f08c<span class="symbol">47f</span>ec<span class="symbol">0942f</span><span class="built_in">a0</span></span><br></pre></td></tr></table></figure><ol start="5"><li>回信通过后,在广告-&gt;广告单元-&gt;创建新的广告单元中选择,<strong>选取要使用的样式</strong>,我选择了<em>文章内嵌广告</em>然后把代码加到网页中<br>打开 hexo-theme-snippet/layout/post.ejs 文件</li></ol><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"process"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"post"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-head"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"&lt;%=</span></span></span><span class="ruby"> page.title </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"><span class="keyword">if</span>(page.link)&#123;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%-</span></span></span><span class="ruby"> url_for(page.link) </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> page.title </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">&#125;<span class="keyword">else</span>&#123;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> page.title<span class="params">||</span><span class="string">'NO Title!'</span> </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">&#125;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> partial(<span class="string">'_partial/article-meta'</span>, &#123;<span class="symbol">post:</span> page&#125;) </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">                var diffDays = moment(new Date()).diff(moment(page.date), <span class="string">'day'</span>);</span></span><br><span class="line"><span class="ruby">                var warningTextArr = theme.warning.text.split(<span class="string">"%d"</span>);</span></span><br><span class="line"><span class="ruby">            </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>((theme.warning.days!=<span class="number">0</span>) &amp;&amp; diffDays &gt; (theme.warning.days <span class="params">||</span> <span class="number">300</span>))&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"fa fa-exclamation-triangle warning"</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> warningTextArr[<span class="number">0</span>]</span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> diffDays </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> warningTextArr[<span class="number">1</span>]</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> partial(<span class="string">'_partial/gallery'</span>,&#123;<span class="symbol">post:</span>page&#125;)</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- google广告 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"googleAd"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-body post-content"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> page.content </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(theme.reward.alipay <span class="params">||</span> theme.reward.wepay)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> partial(<span class="string">'_partial/reward'</span>) </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-footer"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(theme.declaration.enable)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> theme.declaration.title </span><span class="xml"><span class="tag">%&gt;</span>：<span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> theme.declaration.tip </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> theme.cc </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(theme.cc)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> _<span class="number">_</span>(<span class="string">'post_licence'</span>) </span><span class="xml"><span class="tag">%&gt;</span>: <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> theme.cc </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-nav prev-next-wrap clearfix"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(page.prev)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%-</span></span></span><span class="ruby"> url_for(page.prev.path) </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span> <span class="attr">class</span>=<span class="string">"pre-post btn btn-default"</span> <span class="attr">title</span>=<span class="string">'&lt;%-</span></span></span><span class="ruby"> page.prev.title </span><span class="xml"><span class="tag"><span class="string">%&gt;'</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-angle-left fa-fw"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden-lg"</span>&gt;</span>上一篇<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden-xs"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> page.prev.title </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(page.<span class="keyword">next</span>)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%-</span></span></span><span class="ruby"> url_for(page.<span class="keyword">next</span>.path) </span><span class="xml"><span class="tag"><span class="string">%&gt;"</span> <span class="attr">class</span>=<span class="string">"next-post btn btn-default"</span> <span class="attr">title</span>=<span class="string">'&lt;%-</span></span></span><span class="ruby"> page.<span class="keyword">next</span>.title </span><span class="xml"><span class="tag"><span class="string">%&gt;'</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden-lg"</span>&gt;</span>下一篇<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden-xs"</span>&gt;</span><span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> page.<span class="keyword">next</span>.title </span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-angle-right fa-fw"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- google广告 --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"googleAd"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(page.comments)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"comments"</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> partial(<span class="string">'_vendor/comments/index'</span>, &#123;<span class="symbol">page:</span> page&#125;) </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="首页广告"><a href="#首页广告" class="headerlink" title="首页广告"></a>首页广告</h3><ol><li>修改_config.yml,在 widgets 中将-search 去掉</li><li>找到 layout/_widget/notification.ejs 文件修改内容如下</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%if(theme.notification)&#123;%</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"widget"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>广告推广<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"notification"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ins</span> <span class="attr">class</span>=<span class="string">"adsbygoogle"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">"display:block; text-align:center;"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-layout</span>=<span class="string">"in-article"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-format</span>=<span class="string">"fluid"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-client</span>=<span class="string">"ca-pub-7854187021513757"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">data-ad-slot</span>=<span class="string">"4190749692"</span>&gt;</span><span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">     (adsbygoogle = <span class="built_in">window</span>.adsbygoogle || []).push(&#123;&#125;);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%&#125;%</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>下载插件:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://github.com/shenliyang/hexo-theme-snippet.git themes/hexo-theme-snippet</span><br></pre></td></tr></table></figure><ol start="2"><li>安装依赖:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-renderer-ejs hexo-renderer-less hexo-deployer-git -S</span><br><span class="line">cnpm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="在主-config-yml-修改主题为"><a href="#在主-config-yml-修改主题为" class="headerlink" title="在主_config.yml 修改主题为"></a>在主_config.yml 修改主题为</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">theme</span>: hexo-<span class="built_in">theme</span>-snippet</span><br></pre></td></tr></table></figure><h3 id="配置-menu-其中关于的页面要单独编写-后面介绍"><a href="#配置-menu-其中关于的页面要单独编写-后面介绍" class="headerlink" title="配置 menu(其中关于的页面要单独编写,后面介绍)"></a>配置 menu(其中关于的页面要单独编写,后面介绍)</h3><p>注意 categories 和实际文章中的对应(包括大小写)</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">menu</span>:</span><br><span class="line">- <span class="attribute">page</span>: home</span><br><span class="line">  <span class="attribute">url</span>: /</span><br><span class="line">  <span class="attribute">icon</span>: fa-home</span><br><span class="line">- <span class="attribute">page</span>: Qt</span><br><span class="line">  <span class="attribute">url</span>: /categories/Qt</span><br><span class="line">  <span class="attribute">icon</span>:</span><br><span class="line">- <span class="attribute">page</span>: Python</span><br><span class="line">  <span class="attribute">url</span>: /categories/Python</span><br><span class="line">  <span class="attribute">icon</span>:</span><br><span class="line">- <span class="attribute">page</span>: Linux</span><br><span class="line">  <span class="attribute">url</span>: /categories/Linux</span><br><span class="line">  <span class="attribute">icon</span>:</span><br><span class="line">- <span class="attribute">page</span>: 杂谈</span><br><span class="line">  <span class="attribute">url</span>: /categories/杂谈</span><br><span class="line">  <span class="attribute">icon</span>:</span><br><span class="line">- <span class="attribute">page</span>: 时间轴</span><br><span class="line">  <span class="attribute">url</span>: /archives/</span><br><span class="line">  <span class="attribute">icon</span>:</span><br><span class="line">- <span class="attribute">page</span>: 关于</span><br><span class="line">  <span class="attribute">url</span>: /about/</span><br><span class="line">  <span class="attribute">icon</span>:</span><br></pre></td></tr></table></figure><h3 id="生成-about-页面"><a href="#生成-about-页面" class="headerlink" title="生成 about 页面"></a>生成 about 页面</h3><ol><li>hexo new page about</li><li>编写 about 目录下的 index.md</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">关于博主</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2019</span><span class="number">-04</span><span class="number">-13</span> <span class="number">23</span><span class="string">:11:43</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 关于本页面</span></span><br><span class="line"><span class="string">*</span> <span class="string">本页面是采用MARKDOWN</span> <span class="string">和</span> <span class="string">HTML混合编写</span></span><br><span class="line"><span class="string">*</span> <span class="string">主题基于</span> <span class="string">snippet</span></span><br><span class="line"><span class="string">*</span> <span class="string">一个对博主的简介</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 关于博主</span></span><br><span class="line"><span class="string">*</span> <span class="string">人生苦短,</span> <span class="string">我用</span> <span class="string">Python！</span></span><br><span class="line"><span class="string">*</span> <span class="string">简单高效,</span> <span class="string">必须C语言</span></span><br><span class="line"><span class="string">*</span> <span class="string">优雅通用,</span> <span class="string">我选Qt</span></span><br><span class="line"><span class="string">*</span> <span class="string">博主</span> <span class="string">Github</span> <span class="string">地址：https://github.com/spygg</span></span><br><span class="line"><span class="string">*</span> <span class="string">联系邮箱：liushidc@163.com</span></span><br><span class="line"><span class="string">*</span> <span class="string">我的知乎:</span> <span class="string">https://www.zhihu.com/people/spygg/activities</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 关于打赏</span></span><br><span class="line"><span class="string">*</span> <span class="string">本小节是使用HTML编写</span></span><br><span class="line"><span class="string">*</span> <span class="string">如果你感觉有用的话,大胆的赏赐吧,(*^__^*)</span></span><br><span class="line"><span class="string">&lt;img</span> <span class="string">style="width:</span> <span class="string">200px;display:</span> <span class="string">block;margin:</span> <span class="number">0</span> <span class="string">auto;"</span> <span class="string">src="/img/weixincode.jpg"&gt;</span></span><br><span class="line"><span class="string">&lt;center</span> <span class="string">style="font-size:</span> <span class="string">20px;</span> <span class="attr">margin-bottom:</span> <span class="string">2em;"&gt;微信赞助&lt;/center&gt;</span></span><br><span class="line"><span class="string">&lt;img</span> <span class="string">style="width:</span> <span class="string">200px;display:</span> <span class="string">block;margin:</span> <span class="number">0</span> <span class="string">auto;"</span> <span class="string">src="/img/zhifubaocode.jpg"&gt;</span></span><br><span class="line"><span class="string">&lt;center</span> <span class="string">style="font-size:</span> <span class="string">20px;</span> <span class="attr">margin-bottom:</span> <span class="string">2em;"&gt;支付宝打赏&lt;/center&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 谢谢</span></span><br></pre></td></tr></table></figure><p>同时修改 themes/hexo-theme-snippet/layout/_partial/header.ejs 下的头像链接为关于页面</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a <span class="attribute">class</span>=<span class="string">"header-avatar"</span> <span class="attribute">href</span>=<span class="string">"/about"</span> <span class="attribute">title</span>=<span class="string">'&lt;%= config.author %&gt;'</span>&gt;</span><br></pre></td></tr></table></figure><h2 id="添加-google-索引"><a href="#添加-google-索引" class="headerlink" title="添加 google 索引"></a>添加 google 索引</h2><ol><li>注册 google 账号</li><li><p>打开<a href="https://search.google.com/search-console/welcome" target="_blank" rel="noopener">google 的控制台</a>选择第二个如下图所示</p><p><img src="/photos/基于snippet主题在github上搭建博客/google控制台.png" alt="google控制台"></p></li></ol><p>3) 在设置页面中会提供验证方法</p><ul><li>html 页面验证(这一步 google 会给一个 html 文件,放到工程的<strong>source</strong>目录下,这样在 hexo g 的时候会自动复制到站点根目录)</li><li>html 字段验证(打/themes/hexo-theme-snippet/layout/_partial/head.ejs 文件)在头部添加</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta <span class="attribute">name</span>=<span class="string">"google-site-verification"</span> <span class="attribute">content</span>=<span class="string">"google提供的字段在控制台里面会有"</span> /&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li>生成站点地图</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm <span class="keyword">install</span> hexo-generator-sitemap <span class="comment">--save</span></span><br></pre></td></tr></table></figure><ol start="5"><li><p>在控制台左侧的站点地图中输入站点地图的名称(一般为 sitemap.xml)</p></li><li><p>在<em>source</em>目录下新建 robots.txt 文件内容如下(即允许所有)</p></li></ol><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">User-<span class="string">agent:</span> *</span><br><span class="line"><span class="string">Allow:</span> /</span><br></pre></td></tr></table></figure><h2 id="添加必应索引"><a href="#添加必应索引" class="headerlink" title="添加必应索引"></a>添加必应索引</h2><ol><li>登录<a href="https://www.bing.com/toolbox/webmaster/" target="_blank" rel="noopener">必应控制台</a></li><li>添加网站<br><img src="/photos/基于snippet主题在github上搭建博客/bing控制台.png" alt="必应控制台"></li><li>添加验证方法和 google 类似</li></ol><h2 id="必应站内搜索"><a href="#必应站内搜索" class="headerlink" title="必应站内搜索"></a>必应站内搜索</h2><ol><li>这一步是基于上一步的操作,在 node_modules/hexo/lib/plugins/helper/search_form.js 文件中<ul><li>增加 target=”_blank”</li><li>修改 google.com 为 bing.com</li><li>修改 sitesearch 为 q1</li><li>在 value 值前添加 site:</li></ul></li></ol><p>修改后的文件为</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> searchFormHelper(<span class="keyword">options</span> = &#123;&#125;) &#123;</span><br><span class="line">  const config = this.config;</span><br><span class="line">  const className = <span class="keyword">options</span>.<span class="keyword">class</span> || <span class="string">'search-form'</span>;</span><br><span class="line">  const <span class="type">text</span> = <span class="keyword">options</span>.hasOwnProperty(<span class="string">'text'</span>) ? <span class="keyword">options</span>.text : <span class="string">'Search'</span>;</span><br><span class="line">  const button = <span class="keyword">options</span>.button;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> `&lt;form action="//bing.com/search" target="_blank" <span class="keyword">method</span>="get" accept-charset="UTF-8" <span class="keyword">class</span>="$&#123;className&#125;"&gt;&lt;<span class="keyword">input</span> <span class="keyword">type</span>="search" <span class="type">name</span>="q" <span class="keyword">class</span>="$&#123;className&#125;-input"$&#123;<span class="type">text</span> ? ` placeholder="$&#123;text&#125;"` : <span class="string">''</span>&#125;&gt;$&#123;button ? `&lt;button <span class="keyword">type</span>="submit" <span class="keyword">class</span>="$&#123;className&#125;-submit"&gt;$&#123;typeof button === <span class="string">'string'</span> ? button : <span class="type">text</span>&#125;&lt;/button&gt;` : <span class="string">''</span>&#125;&lt;<span class="keyword">input</span> <span class="keyword">type</span>="hidden" <span class="type">name</span>="q1" <span class="keyword">value</span>="site:$&#123;config.url&#125;"&gt;&lt;/form&gt;`;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = searchFormHelper;</span><br></pre></td></tr></table></figure><ol start="2"><li>修改 themes/hexo-theme-snippet/layout/_widget/search.ejs 文件<br>将”谷歌搜索”改为”必应搜索”和”Bing Search”</li></ol><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- search_form(&#123;<span class="string">'button'</span>:<span class="string">'必应搜索'</span>,<span class="string">'text'</span>:<span class="string">'Bing Search'</span>&#125;) %&gt;</span><br></pre></td></tr></table></figure><ol start="3"><li>修改_config.yml 中的</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">searchGoogle:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="gitalk-评论系统"><a href="#gitalk-评论系统" class="headerlink" title="gitalk 评论系统"></a>gitalk 评论系统</h2><p>网上一大堆好多是过时(或者与本主题不一致)信息,找了半天都一直不行,授人以鱼不如授人以渔,下面本大神就一步步演示如何搞定的<a href="https://github.com/gitalk/gitalk" target="_blank" rel="noopener">参考网址 gitalk</a></p><ol><li><p>创建一个新的 OAuth App<br>登录<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">网站</a>新建一个如下图<img src="/photos/基于snippet主题在github上搭建博客/新建页面.png" alt="新建页面"></p></li><li><p>点击上图中的左边的<em>Develop Settings</em>新建一个应用如下图所示<br><img src="/photos/基于snippet主题在github上搭建博客/新建应用.jpg" alt="新建应用"></p></li><li><p>填写配置信息从下图所示的页面中找到最重要的两个 ID<br><img src="/photos/基于snippet主题在github上搭建博客/信息.png" alt="信息"></p></li><li><p>配置_config.yml</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Gitalk评论</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">clientID:</span> <span class="string">6c31603d4df9afc8351b</span></span><br><span class="line">   <span class="attr">clientSecret:</span> <span class="string">c9e81f3ac1492550170fccb28c0f8bb16e3b7ed1</span></span><br><span class="line">   <span class="attr">repo:</span> <span class="string">blogcomment</span></span><br><span class="line">   <span class="attr">owner:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">admin:</span> <span class="string">spygg</span></span><br><span class="line">   <span class="attr">id:</span> <span class="string">window.location.pathname</span></span><br><span class="line">   <span class="comment"># perPage:</span></span><br></pre></td></tr></table></figure><ol start="5"><li>找到 themes/hexo-theme-snippet/layout/_vendor/comments/gitalk.ejs 修改成以下内容,同时解决 Validation Failed 的错误<a href="https://www.voidking.com/2018/07/26/deve-hexo-gitalk-comment-plugin/" target="_blank" rel="noopener">参见链接</a></li></ol><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css"</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitalk-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    var gitalk = new Gitalk(</span><span class="xquery">&#123;</span></span><br><span class="line"><span class="xquery">        // Gitalk配置</span></span><br><span class="line"><span class="xquery">        clientID: <span class="string">"&lt;%= theme.gitalk.clientID%&gt;"</span>,</span></span><br><span class="line"><span class="xquery">        clientSecret: <span class="string">"&lt;%= theme.gitalk.clientSecret%&gt;"</span>,</span></span><br><span class="line"><span class="xquery">        repo: <span class="string">"&lt;%= theme.gitalk.repo%&gt;"</span>,</span></span><br><span class="line"><span class="xquery">        owner: <span class="string">"&lt;%= theme.gitalk.owner%&gt;"</span>,</span></span><br><span class="line"><span class="xquery">        admin: [<span class="string">"&lt;%= theme.gitalk.admin%&gt;"</span>],</span></span><br><span class="line"><span class="xquery">       <span class="built_in"> id</span>: md5(&lt;%= theme.gitalk<span class="built_in">.id</span>%&gt;),</span></span><br><span class="line"><span class="xquery">        distractionFreeMode:<span class="built_in"> true</span></span></span><br><span class="line"><span class="xquery">    &#125;</span><span class="xml">);</span></span><br><span class="line"><span class="xml">    gitalk.render('gitalk-container');</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ol start="6"><li><p>生成,发布页面(不要本地预览),登录你的博客网址,然后在进行你的 github 授权就行了</p></li><li><p>*<strong>*排查错误**</strong><br>一直遇到找不到 issue 的情况,上网各种看教程也不行,下面介绍下解决问题的方法</p></li></ol><ul><li>用 chrome 打开你的博客页面,用 F12 进入 network 模式</li><li>发现最后一个页面为<a href="https://api.github.com/repos/spygg/blogcomment/issues?client_id=6c31603d4df9afc8351b&amp;client_secret=c9e81f3ac1492550170fccb28c0f8bb16e3b7ed1&amp;labels=Gitalk,Gitalk&amp;t=1555766674635打开后发现数据果然为空" target="_blank" rel="noopener">https://api.github.com/repos/spygg/blogcomment/issues?client_id=6c31603d4df9afc8351b&amp;client_secret=c9e81f3ac1492550170fccb28c0f8bb16e3b7ed1&amp;labels=Gitalk,Gitalk&amp;t=1555766674635打开后发现数据果然为空</a></li><li>找到 gitalk 的<a href="https://gitalk.github.io/" target="_blank" rel="noopener">demo 页面</a>看他的网址第二个参数为 Gitalk,Demo</li><li>将我的网址 Gitalk,Gitalk 改为 Gitalk 在进入发现竟然有数据返回</li><li>怀疑是 id 配置不对,用 chrome 源码方式发现果然 ID 有问题于是修改成上面第 5 步中的内容,打完收招…</li></ul><h2 id="添加图片放大"><a href="#添加图片放大" class="headerlink" title="添加图片放大"></a>添加图片放大</h2><p>在 themes/hexo-theme-snippet/layout/_partial/head.ejs 添加入下内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> obj.className.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>));</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">addClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (!<span class="keyword">this</span>.hasClass(obj, cls)) obj.className += <span class="string">" "</span> + cls;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">removeClass</span><span class="params">(obj, cls)</span> </span>&#123;</span></span><br><span class="line">        if (hasClass(obj, cls)) &#123;</span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(\\s|^)'</span> + cls + <span class="string">'(\\s|$)'</span>);</span></span><br><span class="line"><span class="actionscript">            obj.className = obj.className.replace(reg, <span class="string">' '</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> imgs = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'post-body'</span>)[<span class="number">0</span>].getElementsByTagName(<span class="string">'img'</span>)</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;imgs.length;i++)&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">//如果设置非全屏标志则跳过</span></span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(hasClass(imgs[i],<span class="string">'class_no_full_screen'</span>))&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">continue</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="actionscript">            <span class="comment">// imgs[i].setAttribute('data-background', 'rgba(10, 10, 10, .6)');</span></span></span><br><span class="line"><span class="actionscript">            <span class="comment">// imgs[i].setAttribute('data-lightense-padding', "0");</span></span></span><br><span class="line"><span class="actionscript">            imgs[i].setAttribute(<span class="string">'style'</span>, <span class="string">"cursor: zoom-in"</span>);</span></span><br><span class="line"><span class="actionscript">            imgs[i].onclick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> section=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"section"</span>)[<span class="number">0</span>];</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> imgView = <span class="built_in">document</span>.getElementById(<span class="string">'imgViewDom'</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span>(imgView == <span class="literal">undefined</span>)&#123;</span></span><br><span class="line"><span class="javascript">                    imgView=<span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="actionscript">                    imgView.id = <span class="string">"imgViewDom"</span>;</span></span><br><span class="line"></span><br><span class="line">                    section.appendChild(imgView)</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                    imgView.onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                        addClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"><span class="actionscript">                        imgView.innerHTML=<span class="string">""</span>;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">                imgView.innerHTML=<span class="string">"&lt;img id = 'jackslowfuck' src="</span> + <span class="keyword">this</span>.src + <span class="string">" style='cursor: zoom-out; max-width: 100%;'"</span> + <span class="string">"&gt;"</span>;</span></span><br><span class="line"><span class="actionscript">                removeClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> jackslowfuck = <span class="built_in">document</span>.getElementById(<span class="string">'jackslowfuck'</span>);</span></span><br><span class="line"><span class="actionscript">                jackslowfuck.onclick=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">                    addClass(imgView, <span class="string">"disnone"</span>);</span></span><br><span class="line"><span class="actionscript">                    imgView.innerHTML=<span class="string">""</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-id">#imgViewDom</span> &#123;</span></span><br><span class="line">        display: none;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        height: 100%;</span><br><span class="line">        width: 100%;</span><br><span class="line">        z-index: 99999999;</span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-tag">rgba</span>(0, 0, 0,0<span class="selector-class">.7</span>);</span></span><br><span class="line">        overflow: auto;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        -webkit-box-align: center;</span><br><span class="line">        -webkit-box-pack: center;</span><br><span class="line">        display: -moz-box;</span><br><span class="line">        -moz-box-align: center;</span><br><span class="line">        -moz-box-pack: center;</span><br><span class="line">        display: -o-box;</span><br><span class="line">        -o-box-align: center;</span><br><span class="line">        -o-box-pack: center;</span><br><span class="line">        display: -ms-box;</span><br><span class="line">        -ms-box-align: center;</span><br><span class="line">        -ms-box-pack: center;</span><br><span class="line">        display: box;</span><br><span class="line">        box-align: center;</span><br><span class="line">        box-pack: center;</span><br><span class="line">        cursor: zoom-out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.disnone</span>&#123;</span></span><br><span class="line">        display: none !important;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="视频大小调整"><a href="#视频大小调整" class="headerlink" title="视频大小调整"></a>视频大小调整</h2><p>修改 hexo-theme-snippet/source/css/style.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">video</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="去掉首页懒加载图"><a href="#去掉首页懒加载图" class="headerlink" title="去掉首页懒加载图"></a>去掉首页懒加载图</h2><p>在 hexo-theme-snippet/layout/index.ejs 文件中找到_photoUrl 修改为 false 如下所示</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var _photoUrl = post.img <span class="params">||</span> (urls.length &gt; <span class="number">0</span> &amp;&amp; urls[random]) <span class="params">||</span> (urls2.length &gt; <span class="number">0</span> &amp;&amp; urls2[random2]) <span class="params">||</span> <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">_photoUrl = <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="自动创建-gitalk-issue"><a href="#自动创建-gitalk-issue" class="headerlink" title="自动创建 gitalk issue"></a>自动创建 gitalk issue</h2><p>没自己动手….</p><ul><li><p><a href="https://draveness.me/git-comments-initialize" target="_blank" rel="noopener">参考页面 1</a></p></li><li><p><a href="https://daihaoxin.github.io/post/322747ae.html" target="_blank" rel="noopener">参考页面 2</a></p></li></ul><h2 id="我的配置"><a href="#我的配置" class="headerlink" title="我的配置"></a>我的配置</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#   Site Information And Theme Configuration Settings</span></span><br><span class="line"><span class="comment">#   language: zh-CN</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## menu</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">home</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fa-home</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">Qt</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/categories/Qt</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">Python</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/categories/Python</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">Linux</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/categories/Linux</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">杂谈</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/categories/杂谈</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">时间轴</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/archives/</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">page:</span> <span class="string">关于</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## favicon</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/favicon.ico</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Feed</span></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Carousel</span></span><br><span class="line"><span class="attr">carousel:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">'./img/head-img.jpg'</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">'javascript:'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 各个小工具的设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## widgets</span></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">search</span></span><br><span class="line">  <span class="comment"># - notification</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">social</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">category</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">archive</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tagcloud</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">friends</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 搜索</span></span><br><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line">  <span class="attr">searchLocal:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">searchGoogle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站公告设置</span></span><br><span class="line"><span class="attr">notification:</span> <span class="string">|-</span></span><br><span class="line">            <span class="string">&lt;p&gt;</span></span><br><span class="line">                <span class="string">主题下载：&lt;a</span> <span class="string">href="https://github.com/shenliyang/hexo-theme-snippet"</span> <span class="string">title="fork</span> <span class="string">me"</span> <span class="string">target="_blank"&gt;Snippet主题&lt;/a&gt;</span> <span class="string">&lt;br/&gt;</span></span><br><span class="line">                <span class="string">主题使用：&lt;a</span> <span class="string">href="https://github.com/shenliyang/hexo-theme-snippet/blob/master/README.md#常见问题"</span> <span class="string">title=""</span> <span class="string">target="_blank"&gt;常见使用问题&lt;/a&gt;</span> <span class="string">&lt;br/&gt;</span></span><br><span class="line">                <span class="string">支持主题：&lt;a</span> <span class="string">href="https://github.com/shenliyang/hexo-theme-snippet/stargazers"&gt;Star一下&lt;/a&gt;</span></span><br><span class="line">            <span class="string">&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 社交设置</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Github</span></span><br><span class="line">   <span class="attr">icon:</span> <span class="string">git</span></span><br><span class="line">   <span class="attr">href:</span> <span class="string">//github.com/spygg</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">邮箱</span></span><br><span class="line">   <span class="attr">icon:</span> <span class="string">envelope-o</span></span><br><span class="line">   <span class="attr">href:</span> <span class="string">mailto:liushidc@163.com</span></span><br><span class="line"> <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">RSS</span></span><br><span class="line">   <span class="attr">icon:</span> <span class="string">feed</span></span><br><span class="line">   <span class="attr">href:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章分类设置</span></span><br><span class="line"><span class="attr">cate_config:</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">show_current:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章归档设置</span></span><br><span class="line"><span class="attr">arch_config:</span></span><br><span class="line">   <span class="attr">type:</span> <span class="string">'monthly'</span></span><br><span class="line">   <span class="attr">format:</span> <span class="string">'YYYY年MM月'</span></span><br><span class="line">   <span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">order:</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 标签云设置</span></span><br><span class="line"><span class="attr">tagcloud:</span></span><br><span class="line">  <span class="attr">tag3d:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">textColour:</span> <span class="string">'#444'</span></span><br><span class="line">  <span class="attr">outlineMethod:</span> <span class="string">'block'</span></span><br><span class="line">  <span class="attr">outlineColour:</span> <span class="string">'#FFDAB9'</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="number">30</span></span><br><span class="line">  <span class="attr">freezeActive:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">frontSelect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">reverse:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">wheelZoom:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 友链设置</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">Hexo官网:</span> <span class="string">https://hexo.io/zh-cn/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">snippet主题博主:</span> <span class="string">https://www.91h5.cc/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主题自定义个性化配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站宣传语</span></span><br><span class="line"><span class="attr">branding:</span> <span class="string">技术引领生活!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置banner背景图片</span></span><br><span class="line"><span class="attr">banner:</span></span><br><span class="line">    <span class="attr">img:</span> <span class="string">http://snippet.shenliyang.com/img/banner.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 首页列表底部面板</span></span><br><span class="line"><span class="attr">homePanel:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 缩略图自定义随机图片</span></span><br><span class="line"><span class="attr">defaultImgs:</span></span><br><span class="line">  <span class="bullet">-</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 截取文章首页描述字数</span></span><br><span class="line"><span class="attr">excerptLength:</span> <span class="number">120</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 是否开启文章目录</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 代码高亮配置</span></span><br><span class="line"><span class="attr">highlightTheme:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## bootstrap配置</span></span><br><span class="line"><span class="attr">bootstrap:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## ICON配置</span></span><br><span class="line"><span class="attr">fontAwesome:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章过期提醒功能</span></span><br><span class="line"><span class="attr">warning:</span></span><br><span class="line">  <span class="attr">days:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">text:</span> <span class="string">'本文于%d天之前发表，文中内容可能已经过时。'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章内声明</span></span><br><span class="line"><span class="attr">declaration:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">'转载声明'</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">|-</span></span><br><span class="line">      <span class="string">商业转载请联系作者获得授权,非商业转载请注明出处</span> <span class="string">©</span> <span class="string">&lt;a</span> <span class="string">href=""</span> <span class="string">target="_blank"&gt;spygg&lt;/a&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 文章打赏</span></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">alipay:</span> <span class="string">'/img/zhifubaocode.jpg'</span></span><br><span class="line">  <span class="attr">wepay:</span> <span class="string">'/img/weixincode.jpg'</span></span><br><span class="line">  <span class="attr">tip:</span> <span class="string">您的支持是我前行的动力!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 主题评论</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Valine评论</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">appId:</span></span><br><span class="line">   <span class="attr">appKey:</span></span><br><span class="line">   <span class="attr">placeholder:</span> <span class="string">说点什么吧</span></span><br><span class="line">   <span class="attr">notify:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">verify:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">avatar:</span> <span class="string">mm</span></span><br><span class="line">   <span class="attr">meta:</span> <span class="string">nick,mail</span></span><br><span class="line">   <span class="attr">pageSize:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 畅言评论(需要ICP备案)</span></span><br><span class="line"><span class="attr">changyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">appid:</span></span><br><span class="line">  <span class="attr">conf:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 来必力</span></span><br><span class="line"><span class="attr">livere:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">livere_uid:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Gitalk评论</span></span><br><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">clientID:</span></span><br><span class="line">   <span class="attr">clientSecret:</span></span><br><span class="line">   <span class="attr">repo:</span></span><br><span class="line">   <span class="attr">owner:</span></span><br><span class="line">   <span class="attr">admin:</span></span><br><span class="line">   <span class="attr">perPage:</span></span><br><span class="line">   <span class="attr">id:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### Disqus评论</span></span><br><span class="line"><span class="attr">disqus:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">shortname:</span> <span class="string">snippet</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### gitment评论(长期不更新，不建议使用)</span></span><br><span class="line"><span class="attr">gitment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">client_id:</span></span><br><span class="line">  <span class="attr">client_secret:</span></span><br><span class="line">  <span class="attr">perPage:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 友言评论(服务不稳定)</span></span><br><span class="line"><span class="attr">uyan:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">uyan_id:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访客统计</span></span><br><span class="line"><span class="attr">visit_counter:</span></span><br><span class="line">   <span class="attr">site:</span> <span class="literal">false</span></span><br><span class="line">   <span class="attr">page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 网站访问统计分析</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 网盟CNZZ统计</span></span><br><span class="line"><span class="attr">cnzz_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度统计</span></span><br><span class="line"><span class="attr">baidu_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 谷歌统计</span></span><br><span class="line"><span class="attr">google_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 腾讯分析</span></span><br><span class="line"><span class="attr">tencent_analytics:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度站点认证</span></span><br><span class="line"><span class="attr">baidu_site_verification:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 百度自动推送</span></span><br><span class="line"><span class="attr">baidu_push:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#网站主题配置</span></span><br><span class="line"><span class="attr">since:</span> <span class="number">2019</span></span><br><span class="line"><span class="attr">robot:</span> <span class="string">'all'</span> <span class="comment">### 控制搜索引擎的抓取和索引编制行为，默认为all</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.2</span><span class="number">.1</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;折腾了一通之后,还是更喜欢 snippet 主题,并且发誓不在折腾了,好吧,我开玩笑的呢!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本人也做了一个动态的不过没买服务器,如下图所示&lt;br&gt;&lt;img src=&quot;/photos/基于snippet主题在
      
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="Gitpage" scheme="https://liusblog.top/tags/Gitpage/"/>
    
      <category term="Hexo" scheme="https://liusblog.top/tags/Hexo/"/>
    
      <category term="snippet" scheme="https://liusblog.top/tags/snippet/"/>
    
  </entry>
  
  <entry>
    <title>CSDN博客转高清PDF</title>
    <link href="https://liusblog.top/2019/04/12/CSDN%E5%8D%9A%E5%AE%A2%E8%BD%AC%E9%AB%98%E6%B8%85PDF/"/>
    <id>https://liusblog.top/2019/04/12/CSDN博客转高清PDF/</id>
    <published>2019-04-12T14:06:14.000Z</published>
    <updated>2020-02-23T05:43:27.954Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>起源:主要是为了学习ffmpeg,然后看到雷神大人的<a href="https://blog.csdn.net/leixiaohua1020" target="_blank" rel="noopener">博客</a>太好了(但是CSDN广告太多了….),就爬取下来了,理论上可以爬取所有的csdn</p></blockquote><a id="more"></a><h2 id="效果"><a href="#效果" class="headerlink" title="效果:"></a>效果:</h2><p>先看疗效—–雷神高清无码博客图<br><img src="/photos/CSDN博客转高清PDF/成果.png" alt="图片"></p><h2 id="用法"><a href="#用法" class="headerlink" title="用法:"></a>用法:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python csdn.py</span><br></pre></td></tr></table></figure><h2 id="所需库-标注库除外"><a href="#所需库-标注库除外" class="headerlink" title="所需库:(标注库除外)"></a>所需库:(标注库除外)</h2><ul><li>pdfkit </li><li>PyPDF2 </li><li>bs4</li></ul><p><strong>致敬雷神大人!!!!</strong></p><h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤:"></a>实现步骤:</h2><ol><li><p>获取目标用户名:<br>找到目标博客地址,得到用户名如: <a href="https://blog.csdn.net/leixiaohua1020" target="_blank" rel="noopener">https://blog.csdn.net/leixiaohua1020</a> 的用户名为<em>leixiaohua1020</em></p></li><li><p>获取文章列表:<br>网址格式为: <a href="https://blog.csdn.net/用户名/article/list/页码" target="_blank" rel="noopener">https://blog.csdn.net/用户名/article/list/页码</a>?<br>从1依次增加上述网址中的页码,当出现”空空如也”的时候即超过了最后一页,可作为终止条件(代码中的getPageByIndex函数)<br><img src="/photos/CSDN博客转高清PDF/文章列表.png" alt="文章列表"></p></li><li><p>获取文章链接:<br> 在上一步中得到的目录页面中通过chrome调试模式可以发现所有文章都在class=”article-list”的div中,而且链接在子div的class=”article-item-box”中的href中(代码中的getArticlesInPage函数)<br> <img src="/photos/CSDN博客转高清PDF/文章链接.png" alt="文章链接"></p></li><li><p>获取文章内容:<br>这一步没啥好说的,拿到网址后直接开干(getArticleByUrl函数)</p></li><li><p>数据清洗并生成PDF:</p><p> 本步骤的目的主要是进行去广告,同时尽可能的保留博客的原汁原味主要在函数startThreadPool中完成</p><p> ①cleanHtmlData主要对数据进行清洗,需要一点html知识</p><p> ②为了加快生成速度,开辟了线程池主要调用函数doConvert</p><p> ③生成pdf主要用到了pdfkit中的from_string()函数</p></li><li><p>PDF合并:</p><p> ①生成目录</p><p> ②添加书签(带跳转链接) </p></li><li><p>数据库:<br> 为了减少服务器压力使用了数据库(同时也方便我们自己,只需要爬取一次)</p></li></ol><h2 id="代码"><a href="#代码" class="headerlink" title="代码:"></a>代码:</h2><p>代码在我的github中就有了<a href="https://github.com/spygg/csdn/" target="_blank" rel="noopener">https://github.com/spygg/csdn/</a></p><h2 id="ps"><a href="#ps" class="headerlink" title="ps:"></a>ps:</h2><p>因为CSDN可能会进行<strong>反爬</strong>所以请随时关注<a href="https://github.com/spygg/csdn/" target="_blank" rel="noopener">本人github</a></p><h2 id="pps"><a href="#pps" class="headerlink" title="pps:"></a>pps:</h2><p>请低调使用!</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记:"></a>后记:</h2><blockquote><p>话说这个项目也折腾了我好几天,刚开始把所有的html弄到一个页面中想使用chrome导出为PDF功能,谁知道在本人的8g内存i7处理器的电脑上连续跑了几天后电脑直接卡死,试了几次均无效后<strong>痛定思痛</strong>才想起了化整为零,后面为了加快转化进度开辟了几十个线程来搞也是不错的</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;起源:主要是为了学习ffmpeg,然后看到雷神大人的&lt;a href=&quot;https://blog.csdn.net/leixiaohua1020&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;博客&lt;/a&gt;太好了(但是CSDN广告太多了….),就爬取下来了,理论上可以爬取所有的csdn&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python" scheme="https://liusblog.top/categories/Python/"/>
    
    
      <category term="爬虫" scheme="https://liusblog.top/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>Qt版本ubuntu有道云笔记</title>
    <link href="https://liusblog.top/2019/04/09/ubuntu-%E6%9C%89%E9%81%93%E4%BA%91%E7%AC%94%E8%AE%B0/"/>
    <id>https://liusblog.top/2019/04/09/ubuntu-有道云笔记/</id>
    <published>2019-04-09T14:03:45.000Z</published>
    <updated>2020-02-23T05:43:27.957Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>想一键将网页转化成APP吗? 本文也许会有你想要的答案</p></blockquote><h2 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h2><p>运行效果和网页版本的没有区别<br><img src="/photos/Qt版本ubuntu有道云笔记/运行效果.gif" alt="运行效果"><br>网易云笔记网页版其实非常好了,但是本人还是比较喜欢客户端一点</p><h2 id="其他作品"><a href="#其他作品" class="headerlink" title="其他作品"></a>其他作品</h2><p>找到了一个<a href="https://github.com/jamasBian/youdao-note-electron" target="_blank" rel="noopener">有道云笔记nodejs版</a> .但是发现有bug(图片有时候显示不完全),想到Qt中也有webenginewidgets完全满足需要,而且非常非常简单,几句话就行了</p><h2 id="核心代码"><a href="#核心代码" class="headerlink" title="核心代码"></a>核心代码</h2><p>其实也只有tmd只有下面几句,想要把其他官网转为程序的替换下面的网址和logo图片就行(就是这么简单<em>粗暴</em>)<br>详情见后面<strong>附件</strong><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.cpp文件</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWebEngineView&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QIcon&gt;</span></span></span><br><span class="line"><span class="comment">//#include &lt;QDebug&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//本句会导致页面显示不正常,估计在手机上需要开放此句话</span></span><br><span class="line"><span class="comment">//    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);</span></span><br><span class="line"></span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    app.setWindowIcon(QIcon(<span class="string">":/res/logo.png"</span>));</span><br><span class="line"></span><br><span class="line">    QWebEngineView view;</span><br><span class="line">    view.setUrl(QUrl(<span class="string">"https://note.youdao.com/signIn/index.html?&amp;callback=https%3A%2F%2Fnote.youdao.com%2Fweb%2F&amp;from=web"</span>));</span><br><span class="line"></span><br><span class="line">    view.showMaximized();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="安装到-opt-youDaoNote-目录"><a href="#安装到-opt-youDaoNote-目录" class="headerlink" title="安装到/opt/youDaoNote/目录"></a>安装到/opt/youDaoNote/目录</h2><p>desktop文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line"><span class="attribute">Version</span>=1.0</span><br><span class="line"><span class="attribute">Type</span>=Application</span><br><span class="line"><span class="attribute">Name</span>=Youdao Note</span><br><span class="line"><span class="attribute">GenericName</span>=Youdao Note</span><br><span class="line"><span class="attribute">Comment</span>=有道云笔记Linu版本</span><br><span class="line"><span class="attribute">Terminal</span>=<span class="literal">false</span></span><br><span class="line"><span class="attribute">Exec</span>=/opt/youDaoNote/youDaoNote</span><br><span class="line"><span class="attribute">MimeType</span>=text/plain;</span><br><span class="line"><span class="attribute">Icon</span>=/opt/youDaoNote/res/logo.png</span><br><span class="line"><span class="attribute">Categories</span>=TextEditor;Development;</span><br><span class="line"><span class="attribute">StartupNotify</span>=<span class="literal">true</span></span><br><span class="line"><span class="attribute">Actions</span>=Window;Document;</span><br></pre></td></tr></table></figure></p><h2 id="附件"><a href="#附件" class="headerlink" title="附件"></a>附件</h2><p><a href="/attachment/Qt版本ubuntu有道云笔记/youDaoNote.zip">工程文件</a></p><h2 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h2><p>需要库的请自行下载</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;想一键将网页转化成APP吗? 本文也许会有你想要的答案&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;运行效果&quot;&gt;&lt;a href=&quot;#运行效果&quot; class=&quot;headerlink&quot; title=&quot;运行效果&quot;&gt;&lt;/a&gt;运行效果&lt;/h2&gt;&lt;p&gt;
      
    
    </summary>
    
      <category term="Qt" scheme="https://liusblog.top/categories/Qt/"/>
    
    
      <category term="QWidget" scheme="https://liusblog.top/tags/QWidget/"/>
    
      <category term="QWebEngineView" scheme="https://liusblog.top/tags/QWebEngineView/"/>
    
  </entry>
  
  <entry>
    <title>基于yilia主题在github上搭建博客</title>
    <link href="https://liusblog.top/2019/04/07/%E5%9C%A8github%E4%B8%8A%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>https://liusblog.top/2019/04/07/在github上搭建博客/</id>
    <published>2019-04-07T11:40:47.000Z</published>
    <updated>2020-02-23T05:43:27.958Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>经过一系列折腾后,发现还是hexo + github 写博客靠谱,MARKDOWN语法真香…<br>更多内容请参考<a href="https://www.staticgen.com/" target="_blank" rel="noopener">staticgen网站</a></p></blockquote><a id="more"></a><h2 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h2><h3 id="安装hexo-首先安装nodejs-这里没啥好说的-如果网速比较慢请更换为淘宝源"><a href="#安装hexo-首先安装nodejs-这里没啥好说的-如果网速比较慢请更换为淘宝源" class="headerlink" title="安装hexo,首先安装nodejs 这里没啥好说的,如果网速比较慢请更换为淘宝源"></a>安装hexo,首先安装nodejs 这里没啥好说的,如果网速比较慢请更换为淘宝源</h3><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo-<span class="keyword">cli</span> --registry=https://registry.npm.taobao<span class="meta">.org</span></span><br></pre></td></tr></table></figure><h3 id="在合适目录执行命令"><a href="#在合适目录执行命令" class="headerlink" title="在合适目录执行命令"></a>在合适目录执行命令</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">cnpm <span class="keyword">install</span></span><br><span class="line">cnpm <span class="keyword">install</span> hexo-deployer-git <span class="comment">--save 没有这一步的话可能会在hexo d发布这一步报错</span></span><br><span class="line">cnpm <span class="keyword">install</span> <span class="comment">--save hexo-tag-aplayer</span></span><br><span class="line">cnpm i hexo-generator-<span class="keyword">json</span>-<span class="keyword">content</span> <span class="comment">--save 这个是yilia主题要用到的</span></span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>打开目录下的_config.yml文件在[theme]中选择想要的主题<br>在deploy中填入:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deploy</span>:</span><br><span class="line">  <span class="attribute">type</span>: git</span><br><span class="line">  <span class="attribute">branch</span>: master</span><br><span class="line">  <span class="attribute">message</span>: <span class="string">'站点更新:&#123;&#123;now("YYYY-MM-DD HH/mm/ss")&#125;&#125;'</span></span><br><span class="line">  <span class="attribute">repo</span>: git<span class="variable">@github</span>.<span class="attribute">com</span>:spygg/spygg.github.io.git</span><br></pre></td></tr></table></figure></p><h2 id="命令"><a href="#命令" class="headerlink" title="命令:"></a>命令:</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">hexo</span> <span class="string">s 为启动服务</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">clean 为清除部署</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">g 是产生文件</span></span><br><span class="line"><span class="attr">hexo</span> <span class="string">d 为发布</span></span><br></pre></td></tr></table></figure><h2 id="ps"><a href="#ps" class="headerlink" title="ps:"></a>ps:</h2><h3 id="添加图片技巧"><a href="#添加图片技巧" class="headerlink" title="添加图片技巧"></a>添加图片技巧</h3><pre><code>在source目录下新建一个photos目录,在引用的时候使用如下代码</code></pre><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">图片</span>](<span class="link">/photos/在github上搭建博客(基于yilia主题</span>)/pic.jpg)  头像和打赏就是类似的方法</span><br></pre></td></tr></table></figure><p>修改照片属性<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.article</span> <span class="selector-tag">img</span>&#123;<span class="attribute">max-width</span>:<span class="number">80%</span>;<span class="attribute">margin</span>: <span class="number">0</span> auto;<span class="attribute">display</span>: block; <span class="attribute">max-height</span>: <span class="number">800px</span>;&#125;</span><br></pre></td></tr></table></figure></p><h3 id="添加多个分类使用"><a href="#添加多个分类使用" class="headerlink" title="添加多个分类使用"></a>添加多个分类使用</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[分类1,分类2]</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">tags:</span></span><br><span class="line">    - linux</span><br><span class="line">    - ubuntu</span><br><span class="line">    - centos</span><br><span class="line">    - mail</span><br></pre></td></tr></table></figure><hr><p>参看链接:<br>    <a href="https://www.edevops.top/posts/cc368447.html" target="_blank" rel="noopener">Hexo 基于yilia主题及其它插件优化 </a><br>    <a href="https://www.edevops.top/posts/2543e989.html" target="_blank" rel="noopener">Hexo 静态博客 </a></p><h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><h3 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br></pre></td></tr></table></figure><p>vim yilia/_config.yml</p><h2 id="修改代码块样式"><a href="#修改代码块样式" class="headerlink" title="修改代码块样式"></a>修改代码块样式</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">直接修改编译好的文件。路径为： theme/yilia/source/main.<span class="number">0</span>cf68a<span class="selector-class">.css</span> </span><br><span class="line">修改代码背景色，搜索 <span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span>, 修改<span class="attribute">background</span>后面的颜色</span><br><span class="line"></span><br><span class="line">pre&#123;<span class="attribute">background</span>:<span class="number">#272822</span>;</span><br><span class="line">改为</span><br><span class="line">pre&#123;<span class="attribute">background</span>:<span class="number">#1a0139</span>;</span><br><span class="line"></span><br><span class="line">修改行号颜色，搜索 <span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> <span class="selector-class">.gutter</span> pre .line</span><br><span class="line">将</span><br><span class="line"><span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> <span class="selector-class">.gutter</span> pre .line&#123;<span class="attribute">color</span>:<span class="number">#666</span></span><br><span class="line">改为</span><br><span class="line"><span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> <span class="selector-class">.gutter</span> pre .line&#123;<span class="attribute">color</span>:<span class="number">#fc0000</span></span><br><span class="line"></span><br><span class="line">修改代码字体颜色 <span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> .line</span><br><span class="line"><span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> .line&#123;<span class="attribute">color</span>:<span class="number">#fff</span>;</span><br><span class="line">修改为</span><br><span class="line"><span class="selector-class">.article-entry</span> <span class="selector-class">.highlight</span> .line&#123;<span class="attribute">color</span>:<span class="number">#00ff0d</span>;</span><br></pre></td></tr></table></figure><h2 id="代码块行号显示错乱"><a href="#代码块行号显示错乱" class="headerlink" title="代码块行号显示错乱"></a>代码块行号显示错乱</h2><p>vim yilia/source/main.0cf68a.css</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将 <span class="attribute">white-space</span>:pre-wrap; 删除.</span><br><span class="line">这个问题是自动换行造成的，使用不自动换行的<span class="attribute">white-space</span>:pre;</span><br><span class="line">样式代码块部分会自动出现底部滚动条，行号错乱问题就没有了</span><br></pre></td></tr></table></figure><h2 id="版权声明"><a href="#版权声明" class="headerlink" title="版权声明"></a>版权声明</h2><p> themes/yilia/layout/_partial/article.ejs中 在 &lt;% if ((theme.reward_type === 2 || (theme.reward_type === 1 &amp;&amp; post.reward)) &amp;&amp; !index){ %&gt; 上边插入代码</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span></span><br><span class="line"><span class="ruby">  var sUrl = url.replace(<span class="regexp">/index\.html$/</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="ruby">  sUrl = <span class="regexp">/^(http:|https:)\/\//</span>.test(sUrl) ? sUrl : <span class="string">'https:'</span> + sUrl;</span></span><br><span class="line"><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span> ((theme.declare_type === <span class="number">2</span> <span class="params">||</span> (theme.declare_type === <span class="number">1</span> &amp;&amp; post.declare)) &amp;&amp; !index)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"declare"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>本文作者：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(config.author != undefined)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> config.author</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125;<span class="keyword">else</span>&#123;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">"red"</span>&gt;</span>请在博客根目录“_config.yml”中填入正确的“author”<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">&#125;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>本文链接：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> sUrl</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>版权声明：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="xml">    本作品采用</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">rel</span>=<span class="string">"license"</span> <span class="attr">href</span>=<span class="string">"&lt;%=</span></span></span><span class="ruby"> theme.licensee_url</span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> theme.licensee_name</span><span class="xml"><span class="tag">%&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    进行许可。转载请注明出处！</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span>(theme.licensee_img != undefined)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">rel</span>=<span class="string">"license"</span> <span class="attr">href</span>=<span class="string">"&lt;%=</span></span></span><span class="ruby"> theme.licensee_url</span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"知识共享许可协议"</span> <span class="attr">style</span>=<span class="string">"border-width:0"</span> <span class="attr">src</span>=<span class="string">"&lt;%=</span></span></span><span class="ruby">    theme.licensee_img</span><span class="xml"><span class="tag"><span class="string">%&gt;"</span>/&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; <span class="keyword">else</span> &#123;</span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"declare"</span> <span class="attr">hidden</span>=<span class="string">"hidden"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br></pre></td></tr></table></figure><p>vim yilia/source/main.0cf68a.css 添加如下代码<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.declare</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eaeaea</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">3px</span> solid <span class="number">#ff1700</span>;</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">5em</span> <span class="number">1em</span>; &#125;</span><br></pre></td></tr></table></figure></p><p>同时在yilla/_config.yml中添加<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">declare_type:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">licensee_name:</span> <span class="string">GPL3.0</span></span><br></pre></td></tr></table></figure></p><p>在根目录的_config.yml中修改url<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">url:</span> <span class="string">https:</span><span class="comment">//spygg.github.io</span></span><br></pre></td></tr></table></figure></p><h2 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h2><ol><li><p>申请账号 具体可以参考<a href="https://valine.js.org" target="_blank" rel="noopener">valine官网</a></p></li><li><p>删除themes/yilia/layout/_partial/post目录下的changyan.ejs duoshuo.ejs wangyiyun.ejs文件<br>vim valine.ejs</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"vcomment"</span> <span class="attr">class</span>=<span class="string">"comment"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"//cdn1.lncld.net/static/js/3.0.4/av-min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">   <span class="keyword">var</span> notify = <span class="string">'&lt;%= theme.valine.notify %&gt;'</span> == <span class="literal">true</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span></span><br><span class="line"><span class="actionscript">   <span class="keyword">var</span> verify = <span class="string">'&lt;%= theme.valine.verify %&gt;'</span> == <span class="literal">true</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">new</span> Valine(&#123;</span></span><br><span class="line"><span class="actionscript">            el: <span class="string">'.comment'</span>,</span></span><br><span class="line">            notify: notify,</span><br><span class="line">            verify: verify,</span><br><span class="line"><span class="actionscript">            app_id: <span class="string">"&lt;%= theme.valine.appid %&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            app_key: <span class="string">"&lt;%= theme.valine.appkey %&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            placeholder: <span class="string">"&lt;%= theme.valine.placeholder %&gt;"</span>,</span></span><br><span class="line"><span class="actionscript">            avatar:<span class="string">"&lt;%= theme.valine.avatar %&gt;"</span></span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>vim /Hexo/themes/EvanM/layout/_partial/article.ejs</p></li></ol><p>增加如下内容<br><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> &lt;% <span class="keyword">if</span> (<span class="built_in">theme</span>.valine &amp;&amp; <span class="built_in">theme</span>.valine.appid &amp;&amp; <span class="built_in">theme</span>.valine.appkey)&#123; %&gt;</span><br><span class="line">    &lt;section id=<span class="string">"comments"</span> style=<span class="string">"margin:10px;padding:10px;background:#fff;"</span>&gt;</span><br><span class="line">      &lt;%- partial(<span class="string">'post/valine'</span>, &#123;</span><br><span class="line">        key: post.slug,</span><br><span class="line">        <span class="built_in">title</span>: post.<span class="built_in">title</span>,</span><br><span class="line">        url: config.url+url_for(post.<span class="built_in">path</span>)</span><br><span class="line">        &#125;) %&gt;</span><br><span class="line">    &lt;/section&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;% <span class="keyword">if</span>(<span class="built_in">theme</span>.gitalk.enable)&#123; %&gt;</span><br><span class="line">    &lt;%- partial(<span class="string">'post/gitalk'</span>, &#123;</span><br><span class="line">        key: post.slug,</span><br><span class="line">        <span class="built_in">title</span>: post.<span class="built_in">title</span>,</span><br><span class="line">        url: config.url+url_for(post.<span class="built_in">path</span>)</span><br><span class="line">    &#125;) %&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;    ##倒数第一行</span><br></pre></td></tr></table></figure></p><h2 id="添加文章分类"><a href="#添加文章分类" class="headerlink" title="添加文章分类"></a>添加文章分类</h2><p>参考链接:<br>       <a href="http://119.3.66.9/archives/Hexo%20yilia%20%E6%B7%BB%E5%8A%A0%E7%9B%AE%E5%BD%95%E9%A1%B5%E9%9D%A2" target="_blank" rel="noopener">Hexo yilia 添加目录页面</a></p><p>主要步骤为:</p><ol><li><p>添加 categories 页面</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span>categories</span><br></pre></td></tr></table></figure></li><li><p>修改index.md</p></li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="number">-10</span><span class="number">-19</span> <span class="number">11</span><span class="string">:22:21</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="attr">layout:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">false</span> <span class="comment">#关闭评论</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>修改配置文件</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line">  主页: <span class="regexp">/</span></span><br><span class="line"><span class="regexp">  分类: /categories</span></span><br><span class="line">  归档: <span class="regexp">/archives</span></span><br><span class="line"><span class="regexp">#随笔: /tags</span><span class="regexp">/随笔/</span></span><br></pre></td></tr></table></figure></li><li><p>新建yilia/layout/categories.ejs</p><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">"article article-type-post show"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">"article-header"</span> <span class="attr">style</span>=<span class="string">"border-bottom: 1px solid #ccc"</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"article-title"</span> <span class="attr">itemprop</span>=<span class="string">"name"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> page.title </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> <span class="keyword">if</span> (site.categories.length)&#123; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"category-all-page"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>共计 <span class="tag">&lt;<span class="name">%=</span></span></span><span class="ruby"> site.categories.length </span><span class="xml"><span class="tag">%&gt;</span> 个分类<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">%-</span></span></span><span class="ruby"> list_categories(site.categories, &#123;</span></span><br><span class="line"><span class="ruby">      <span class="symbol">show_count:</span> <span class="literal">true</span>,</span></span><br><span class="line"><span class="ruby">      <span class="class"><span class="keyword">class</span>: '<span class="title">category</span>-<span class="title">list</span>-<span class="title">item</span>',</span></span></span><br><span class="line"><span class="ruby">      <span class="symbol">style:</span> <span class="string">'list'</span>,</span></span><br><span class="line"><span class="ruby">      <span class="symbol">depth:</span> <span class="number">2</span>,</span></span><br><span class="line"><span class="ruby">      <span class="symbol">separator:</span> <span class="string">''</span></span></span><br><span class="line"><span class="ruby">    &#125;) </span><span class="xml">%&gt;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby"> &#125; </span><span class="xml"><span class="tag">%&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>修改 yilia\source\main.0cf68a.css，将下面的内容添加进去</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">category-all-page</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">30px</span> <span class="number">40px</span> <span class="number">30px</span> <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">70vh</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-all-title</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-all</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-item-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-item-list-count</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: $grey;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-item-list-count</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">" ("</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-item-list-count</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">") "</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-count</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: $grey;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-count</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">" ("</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-count</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">") "</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.category-all-page</span> <span class="selector-class">.category-list-child</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>在写文章时添加categories</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span> <span class="string">yilia</span> <span class="string">添加目录页面</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[linux,Hexo]</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">[Hexo,创建目录]</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></li></ol><p>参考聊天记录<br><img src="/photos/基于yilia主题在github上搭建博客/添加分类.jpg" alt="聊天记录"></p><h2 id="我的根目录-config-yml"><a href="#我的根目录-config-yml" class="headerlink" title="我的根目录_config.yml"></a>我的根目录_config.yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">LiusBlog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">技术引领生活</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">一些技术感悟</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">"Qt,Linux,Python,Django,爬虫,QML,HTML,JAVASCRIPT"</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">spygg</span></span><br><span class="line"><span class="attr">email:</span> <span class="string">liushidc@163.com</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://spygg.github.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># File name of new posts</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># Transform title into titlecase</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># Open external links in new tab</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Home page setting</span></span><br><span class="line"><span class="comment"># path: Root path for your blogs index page. (default = '')</span></span><br><span class="line"><span class="comment"># per_page: Posts displayed per page. (0 = disable pagination)</span></span><br><span class="line"><span class="comment"># order_by: Posts order. (Order by date descending by default)</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">''</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span></span><br><span class="line"><span class="attr">tag_map:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="string">HH:mm:ss</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">yilia</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">'站点更新:<span class="template-variable">&#123;&#123;now("YYYY-MM-DD HH/mm/ss")&#125;&#125;</span>'</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:spygg/spygg.github.io.git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line">  <span class="attr">meta:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pages:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">path:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">text:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">raw:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">content:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">slug:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">updated:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">link:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">permalink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">excerpt:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>主题配置<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Header</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories</span></span><br><span class="line">  <span class="string">归档:</span> <span class="string">/archives</span></span><br><span class="line"><span class="comment">#随笔: /tags/随笔/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># SubNav</span></span><br><span class="line"><span class="attr">subnav:</span></span><br><span class="line">  <span class="attr">github:</span> <span class="string">"https://www.github.com/spygg"</span></span><br><span class="line">  <span class="attr">zhihu:</span> <span class="string">"https://www.zhihu.com/people/spygg/activities"</span></span><br><span class="line">  <span class="attr">rss:</span> <span class="string">"#"</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">#qq: "#"</span></span><br><span class="line">  <span class="comment">#weixin: "#"</span></span><br><span class="line">  <span class="comment">#jianshu: "#"</span></span><br><span class="line">  <span class="comment">#douban: "#"</span></span><br><span class="line">  <span class="comment">#segmentfault: "#"</span></span><br><span class="line">  <span class="comment">#bilibili: "#"</span></span><br><span class="line">  <span class="comment">#acfun: "#"</span></span><br><span class="line">  <span class="comment">#mail: "mailto:litten225@qq.com"</span></span><br><span class="line">  <span class="comment">#facebook: "#"</span></span><br><span class="line">  <span class="comment">#google: "#"</span></span><br><span class="line">  <span class="comment">#twitter: "#"</span></span><br><span class="line">  <span class="comment">#linkedin: "#"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否需要修改 root 路径</span></span><br><span class="line"><span class="comment"># 如果您的网站存放在子目录中，例如 http://yoursite.com/blog，</span></span><br><span class="line"><span class="comment"># 请将您的 url 设为 http://yoursite.com/blog 并把 root 设为 /blog/。</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Content</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文章太长，截断按钮文字</span></span><br><span class="line"><span class="attr">excerpt_link:</span> <span class="string">more</span></span><br><span class="line"><span class="comment"># 文章卡片右下角常驻链接，不需要请设置为false</span></span><br><span class="line"><span class="attr">show_all_link:</span> <span class="string">'more &gt;&gt;'</span></span><br><span class="line"><span class="comment"># 数学公式</span></span><br><span class="line"><span class="attr">mathjax:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 是否在新窗口打开链接</span></span><br><span class="line"><span class="attr">open_in_new:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">declare_type:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">licensee_name:</span> <span class="string">GPL3.0</span></span><br><span class="line"><span class="comment"># 打赏</span></span><br><span class="line"><span class="comment"># 打赏type设定：0-关闭打赏； 1-文章对应的md文件里有reward:true属性，才有打赏； 2-所有文章均有打赏</span></span><br><span class="line"><span class="attr">reward_type:</span> <span class="number">2</span></span><br><span class="line"><span class="comment"># 打赏wording</span></span><br><span class="line"><span class="attr">reward_wording:</span> <span class="string">'您的支持是我前行的动力!'</span></span><br><span class="line"><span class="comment"># 支付宝二维码图片地址，跟你设置头像的方式一样。比如：/assets/img/alipay.jpg</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/img/zhifubaocode.jpg</span></span><br><span class="line"><span class="comment"># 微信二维码图片地址</span></span><br><span class="line"><span class="attr">weixin:</span> <span class="string">/img/weixincode.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 目录</span></span><br><span class="line"><span class="comment"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span></span><br><span class="line"><span class="attr">toc:</span> <span class="number">2</span></span><br><span class="line"><span class="comment"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span></span><br><span class="line"><span class="attr">toc_hide_index:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 目录为空时的提示</span></span><br><span class="line"><span class="attr">toc_empty_wording:</span> <span class="string">'目录，不存在的…'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否有快速回到顶部的按钮</span></span><br><span class="line"><span class="attr">top:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Miscellaneous</span></span><br><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">google_analytics:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">favicon:</span> <span class="string">/img/favicon.png</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#你的头像url</span></span><br><span class="line"><span class="attr">avatar:</span> <span class="string">/img/me.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否开启分享</span></span><br><span class="line"><span class="attr">share_jia:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#评论：1、多说；2、网易云跟帖；3、畅言；4、Disqus；5、Gitment</span></span><br><span class="line"><span class="comment">#不需要使用某项，直接设置值为false，或注释掉</span></span><br><span class="line"><span class="comment">#具体请参考wiki：https://github.com/litten/hexo-theme-yilia/wiki/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1、多说</span></span><br><span class="line"><span class="attr">duoshuo:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2、网易云跟帖</span></span><br><span class="line"><span class="attr">wangyiyun:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3、畅言</span></span><br><span class="line"><span class="attr">changyan_appid:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">changyan_conf:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4、Disqus 在hexo根目录的config里也有disqus_shortname字段，优先使用yilia的</span></span><br><span class="line"><span class="attr">disqus:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4、Valine https://valine.js.org</span></span><br><span class="line"><span class="attr">valine:</span> </span><br><span class="line">  <span class="attr">appid:</span>  <span class="comment">#Leancloud应用的appId</span></span><br><span class="line">  <span class="attr">appkey:</span>  <span class="comment">#Leancloud应用的appKey</span></span><br><span class="line">  <span class="attr">verify:</span> <span class="literal">false</span> <span class="comment">#验证码</span></span><br><span class="line">  <span class="attr">notify:</span> <span class="literal">false</span> <span class="comment">#评论回复提醒</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">identicon</span> <span class="comment">#评论列表头像样式：''/mp/identicon/monsterid/wavatar/retro/hide</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">Just</span> <span class="string">go</span> <span class="string">go</span> <span class="comment">#评论框占位符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5、Gitment</span></span><br><span class="line"><span class="attr">gitment_owner:</span> <span class="string">spygg</span>      <span class="comment">#你的 GitHub ID</span></span><br><span class="line"><span class="attr">gitment_repo:</span> <span class="string">''</span>          <span class="comment">#存储评论的 repo</span></span><br><span class="line"><span class="attr">gitment_oauth:</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="string">''</span>           <span class="comment">#client ID</span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="string">''</span>       <span class="comment">#client secret</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span></span><br><span class="line"><span class="attr">style:</span></span><br><span class="line">  <span class="comment"># 头像上面的背景颜色</span></span><br><span class="line">  <span class="attr">header:</span> <span class="string">'#4d4d4d'</span></span><br><span class="line">  <span class="comment"># 右滑板块背景</span></span><br><span class="line">  <span class="attr">slider:</span> <span class="string">'linear-gradient(200deg,#a0cfe4,#e8c37e)'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># slider的设置</span></span><br><span class="line"><span class="attr">slider:</span></span><br><span class="line">  <span class="comment"># 是否默认展开tags板块</span></span><br><span class="line">  <span class="attr">showTags:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 智能菜单</span></span><br><span class="line"><span class="comment"># 如不需要，将该对应项置为false</span></span><br><span class="line"><span class="comment"># 比如</span></span><br><span class="line"><span class="comment">#smart_menu:</span></span><br><span class="line"><span class="comment">#  friends: false</span></span><br><span class="line"><span class="attr">smart_menu:</span></span><br><span class="line">  <span class="attr">innerArchive:</span> <span class="string">'所有文章'</span></span><br><span class="line">  <span class="attr">friends:</span> <span class="string">'友链'</span></span><br><span class="line">  <span class="attr">aboutme:</span> <span class="string">'关于我'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">friends:</span></span><br><span class="line">  <span class="string">Litten的博客:</span> <span class="string">http://litten.me/</span></span><br><span class="line">  <span class="string">Evan的博客:</span> <span class="string">https://www.edevops.top/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aboutme:</span> <span class="string">&lt;ul&gt;</span>           </span><br><span class="line">                    <span class="string">&lt;li&gt;人生苦短，我用</span> <span class="string">Python！&lt;/li&gt;</span></span><br><span class="line">                    <span class="string">&lt;li&gt;简单高效我学C&lt;/li&gt;</span></span><br><span class="line">                    <span class="string">&lt;li&gt;优雅强大,必须Qt&lt;/li&gt;</span></span><br><span class="line">                    <span class="string">&lt;li&gt;博主</span> <span class="string">Github</span> <span class="string">地址:&lt;a</span> <span class="string">href="https://github.com/spygg"</span> <span class="string">target="_blank"&gt;https://github.com/spygg&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line">                    <span class="string">&lt;li&gt;我的CSDN:&lt;a</span> <span class="string">href="https://blog.csdn.net/spygg"</span> <span class="string">target="_blank"&gt;https://blog.csdn.net/spygg&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line">                    <span class="string">&lt;li&gt;联系邮箱：liushidc@163.com&lt;/li&gt;</span></span><br><span class="line">          <span class="string">&lt;/ul&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;经过一系列折腾后,发现还是hexo + github 写博客靠谱,MARKDOWN语法真香…&lt;br&gt;更多内容请参考&lt;a href=&quot;https://www.staticgen.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;staticgen网站&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="杂谈" scheme="https://liusblog.top/categories/%E6%9D%82%E8%B0%88/"/>
    
    
      <category term="Gitpage" scheme="https://liusblog.top/tags/Gitpage/"/>
    
      <category term="Hexo" scheme="https://liusblog.top/tags/Hexo/"/>
    
  </entry>
  
</feed>
